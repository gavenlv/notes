# BE节点配置文件
# 根据实际环境修改以下配置

# 基本配置
priority_networks = 192.168.0.0/16  # 指定BE使用的IP段，根据实际网络环境修改
storage_root_path = /opt/doris/be/storage,medium:hdd # 数据存储目录
log_dir = /opt/doris/be/log               # 日志目录
tmp_dir = /opt/doris/be/tmp               # 临时目录

# 端口配置
be_port = 9060                     # BE内部通信端口
webserver_port = 8040              # BE HTTP端口
heartbeat_service_thread_count = 1  # 心跳服务线程数
create_table_worker_count = 1      # 创建表工作线程数
tablet_create_timeout_seconds = 60 # 平板创建超时时间

# 存储配置
storage_flood_stage_usage_percent = 85    # 存储洪水阶段使用率
storage_flood_stage_left_capacity_bytes = 1073741824  # 存储洪水阶段剩余容量
max_compaction_threads = 2                # 最大压缩线程数
max_tablet_version_num = 1000             # 最大平板版本数
default_rowset_type = beta                # 默认行集类型
disable_storage_persistence = false       # 禁用存储持久化

# 内存配置
mem_limit = 80%                    # BE内存限制
buffer_pool_limit = 20%            # 缓冲池限制
write_buffer_size = 104857600      # 写缓冲区大小(100MB)
storage_flood_stage_usage_percent = 85    # 存储洪水阶段使用率
storage_flood_stage_left_capacity_bytes = 1073741824  # 存储洪水阶段剩余容量

# 性能配置
max_tablet_version_num = 1000      # 最大平板版本数
default_rowset_type = beta         # 默认行集类型
max_compaction_threads = 2          # 最大压缩线程数
disable_storage_persistence = false # 禁用存储持久化

# 并发配置
max_pushdown_concurrency_per_node = 2  # 每个节点最大下推并发数
max_scan_thread_num_per_cpu = 3         # 每个CPU最大扫描线程数
chunk_size = 4096                       # 块大小

# 网络配置
heartbeat_service_thread_count = 1      # 心跳服务线程数
create_table_worker_count = 1           # 创建表工作线程数
tablet_create_timeout_seconds = 60      # 平板创建超时时间

# 下载配置
download_low_speed_limit = 1048576      # 下载低速限制(1MB/s)
download_low_speed_time = 60            # 下载低速时间(秒)

# 系统配置
sys_log_dir = /opt/doris/be/log          # 系统日志目录
sys_log_roll_mode = SIZE-MB-1024         # 系统日志滚动模式
sys_log_roll_num = 10                   # 系统日志滚动数量
sys_log_verbose_modules = *             # 详细日志模块

# 用户函数配置
builtin_distributed_load_scanner_thread_pool_thread_num = 64  # 内置分布式加载扫描器线程池线程数
streaming_load_rpc_max_alive_time_sec = 1200                # 流式加载RPC最大存活时间

# 压缩配置
compaction_task_num_per_disk = 2        # 每个磁盘压缩任务数
base_compaction_num_threads_per_disk = 1  # 每个磁盘基础压缩线程数
cumulative_compaction_num_threads_per_disk = 1  # 每个磁盘累积压缩线程数

# 查询配置
max_scan_key_num = 1024                 # 最大扫描键数
max_pushdown_conditions_per_column = 1024  # 每列最大下推条件数

# 安全配置
enable_token_check = true               # 启用令牌检查
auth_token = ""                         # 认证令牌

# 监控配置
enable_metric_calculator = true         # 启用指标计算器
metric_calculator_interval_ms = 5000    # 指标计算器间隔(毫秒)