# Doris FE Follower节点2配置文件
# 用于高可用集群中的FE Follower节点

# 基本配置
CUR_DIR=`pwd`
PID_DIR=$CUR_DIR

# 集群配置
priority_networks = 172.20.0.0/16
frontend_address = fe-follower-2

# FE节点角色配置
# follower: 跟随者节点，参与选举和元数据同步
# observer: 观察者节点，只同步元数据，不参与选举
meta_dir = /opt/apache-doris/fe/doris-meta

# 端口配置
http_port = 8030
rpc_port = 9010
query_port = 9030
edit_log_port = 9010
mysql_service_nio_enabled = true

# 集群节点配置
# 注意：这里配置的是集群中所有FE节点的信息
# 格式：fe_id:fe_host:fe_edit_log_port
# fe_id: 节点ID，必须唯一
# fe_host: 节点主机名或IP地址
# fe_edit_log_port: FE节点间通信端口
frontend_address = fe-follower-2
priority_networks = 172.20.0.0/16

# MySQL协议配置
mysql_service_io_thread_num = 4
mysql_nio_backlog_num = 1024

# 元数据配置
# 元数据存储目录
meta_dir = /opt/apache-doris/fe/doris-meta

# 日志配置
LOG_DIR = $CUR_DIR/log
sys_log_level = INFO
sys_log_roll_num = 10
sys_log_roll_interval = DAY
sys_log_verbose_modules = 
audit_log_dir = $CUR_DIR/log
audit_log_roll_num = 10
audit_log_roll_interval = DAY
audit_log_modules = slow_query, query

# 内存配置
# FE进程最大内存，建议设置为物理内存的40%-60%
JAVA_OPTS="-server -Xmx4096m -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7"

# JVM配置
JAVA_OPTS="-Djavax.security.auth.useSubjectCredsOnly=false -Xss256k -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:$CUR_DIR/log/fe.gc.log"

# 性能配置
# 最大连接数
max_connection = 4096

# 查询配置
# 查询超时时间，单位秒
query_timeout = 300

# 物化视图配置
# 自动刷新物化视图
materialized_view_refresh_interval_sec = 10

# 高可用配置
# FE节点间通信超时时间，单位秒
edit_log_port = 9010

# 心跳配置
# FE与BE心跳超时时间，单位秒
heartbeat_timeout_second = 3
heartbeat_interval_second = 1

# 插件配置
# 插件目录
plugin_dir = $CUR_DIR/plugins

# 安全配置
# 是否启用SSL
enable_ssl = false

# 时区设置
timezone = Asia/Shanghai

# 集群配置
# 配置集群中的所有FE节点
# 注意：这里需要根据实际环境修改
# follower: 跟随者节点，参与选举和元数据同步
# observer: 观察者节点，只同步元数据，不参与选举
# 格式：fe_id:fe_host:fe_edit_log_port
# fe_id: 节点ID，必须唯一
# fe_host: 节点主机名或IP地址
# fe_edit_log_port: FE节点间通信端口
# 示例：
# helper_nodes = fe1:fe-follower-1:9010,fe2:fe-follower-2:9010,fe3:fe-follower-3:9010

# 集群ID
# 同一集群中的所有FE节点必须使用相同的cluster_id
cluster_id = 12345

# 选举配置
# 选举超时时间，单位毫秒
election_timeout_ms = 10000

# 选举心跳间隔，单位毫秒
election_heartbeat_interval_ms = 1000

# 备份配置
# 备份存储路径
backup_storage_path = s3://doris-backup

# 监控配置
# 是否启用监控
enable_monitor = true

# 监控数据收集间隔，单位秒
monitor_collection_interval = 10

# 资源隔离配置
# 是否启用资源隔离
enable_resource_group = true

# 资源组配置文件路径
resource_group_path = $CUR_DIR/conf/resource_groups

# 动态分区配置
# 是否启用动态分区
dynamic_partition_enable = true

# 动态分区检查间隔，单位小时
dynamic_partition_check_interval_seconds = 600

# 存储策略配置
# 冷热数据分离策略
storage_policy_path = $CUR_DIR/conf/storage_policies

# 其他配置
# 是否启用审计日志
enable_audit_log = true

# 审计日志保留天数
audit_log_keep_days = 30

# 是否启用查询统计
enable_query_profile = true

# 查询统计保留天数
query_profile_keep_days = 7

# 是否启用SQL黑名单
enable_sql_blacklist = true

# 是否启用慢查询日志
enable_slow_log = true

# 慢查询阈值，单位毫秒
slow_log_threshold_ms = 5000