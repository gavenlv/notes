# Doris BE节点1配置文件
# 用于高可用集群中的BE节点

# 基本配置
CUR_DIR=`pwd`
PID_DIR=$CUR_DIR

# 集群配置
priority_networks = 172.20.0.0/16
be_ip = be-1

# 存储配置
# 存储根目录，可以配置多个目录，用逗号分隔
storage_root_path = /opt/apache-doris/be/storage,medium:hdd

# 端口配置
be_port = 9000
webserver_port = 8040
heartbeat_service_thread_count = 1
create_tablet_worker_count = 3
heartbeat_service_thread_count = 1
create_tablet_worker_count = 3
drop_tablet_worker_count = 3
push_worker_count = 3

# 心跳配置
heartbeat_service_thread_count = 1
heartbeat_service_port = 9050

# 内存配置
# BE进程最大内存，建议设置为物理内存的70%-80%
mem_limit = 80%

# 缓冲区大小配置
# 写入缓冲区大小，单位字节
write_buffer_size = 104857600

# 性能配置
# 最大并发查询数
max_tablet_version_num = 1000

# 最大磁盘使用率，超过此值将停止写入
max_compaction_threads = 2

# 存储配置
# 数据压缩算法，可选：LZ4, ZSTD, SNAPPY
compression = LZ4

# 文件描述符限制
max_open_files = 65535

# 网络配置
# 客户端连接超时时间，单位秒
client_connection_timeout = 30

# 下载配置
# 下载超时时间，单位秒
download_timeout = 3600

# 系统配置
# 是否启用系统保留分区
enable_system_table = true

# 用户函数配置
# 是否启用UDF
enable_udf = true

# 压缩配置
# 数据压缩算法，可选：LZ4, ZSTD, SNAPPY
compression = LZ4

# 查询配置
# 查询超时时间，单位秒
query_timeout = 300

# 查询缓存大小，单位字节
query_cache_size = 0

# 安全配置
# 是否启用SSL
enable_ssl = false

# 监控配置
# 是否启用监控
enable_monitor = true

# 监控数据收集间隔，单位秒
monitor_collection_interval = 10

# 资源隔离配置
# 是否启用资源隔离
enable_resource_group = true

# 资源组配置文件路径
resource_group_path = $CUR_DIR/conf/resource_groups

# 存储策略配置
# 冷热数据分离策略
storage_policy_path = $CUR_DIR/conf/storage_policies

# 日志配置
LOG_DIR = $CUR_DIR/log
sys_log_level = INFO
sys_log_roll_num = 10
sys_log_roll_interval = DAY
sys_log_verbose_modules = 

# 其他配置
# 是否启用审计日志
enable_audit_log = true

# 审计日志保留天数
audit_log_keep_days = 30

# 是否启用查询统计
enable_query_profile = true

# 查询统计保留天数
query_profile_keep_days = 7

# 是否启用SQL黑名单
enable_sql_blacklist = true

# 是否启用慢查询日志
enable_slow_log = true

# 慢查询阈值，单位毫秒
slow_log_threshold_ms = 5000

# 并发配置
# 最大并发扫描线程数
max_scan_thread_num = 48

# 最大并发导入线程数
max_load_thread_num = 12

# 最大并发查询线程数
max_query_thread_num = 48

# 网络配置
# 最大连接数
max_connection = 4096

# 连接超时时间，单位秒
socket_timeout_seconds = 30

# 下载配置
# 下载超时时间，单位秒
download_timeout = 3600

# 下载重试次数
download_low_speed_limit = 1048576

# 下载重试次数
download_low_speed_time = 60

# 系统配置
# 是否启用系统保留分区
enable_system_table = true

# 用户函数配置
# 是否启用UDF
enable_udf = true

# UDF工作目录
udf_runtime_dir = $CUR_DIR/udf_runtime

# UDF内存限制，单位字节
udf_memory_limit_bytes = 2147483648

# 时区设置
timezone = Asia/Shanghai

# 存储引擎配置
# 是否启用列存储
enable_column_storage = true

# 是否启用行存储
enable_row_storage = false

# 是否启用向量存储
enable_vector_storage = false

# 存储引擎配置
# 是否启用列存储
enable_column_storage = true

# 是否启用行存储
enable_row_storage = false

# 是否启用向量存储
enable_vector_storage = false

# 存储引擎配置
# 是否启用列存储
enable_column_storage = true

# 是否启用行存储
enable_row_storage = false

# 是否启用向量存储
enable_vector_storage = false

# 存储引擎配置
# 是否启用列存储
enable_column_storage = true

# 是否启用行存储
enable_row_storage = false

# 是否启用向量存储
enable_vector_storage = false