# Spark 默认配置文件，用于 Iceberg 集成

# Iceberg 扩展配置
spark.sql.extensions                          org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions

# 默认 Catalog 配置
spark.sql.defaultCatalog                     local
spark.sql.catalog.local                      org.apache.iceberg.spark.SparkCatalog
spark.sql.catalog.local.type                 hadoop
spark.sql.catalog.local.warehouse            file:///tmp/iceberg/warehouse

# Spark Catalog 配置（如果使用 Hive Metastore）
spark.sql.catalog.spark_catalog              org.apache.iceberg.spark.SparkSessionCatalog
spark.sql.catalog.spark_catalog.type         hive

# 性能优化配置
spark.sql.adaptive.enabled                   true
spark.sql.adaptive.coalescePartitions.enabled true
spark.sql.adaptive.skewJoin.enabled          true
spark.serializer                             org.apache.spark.serializer.KryoSerializer

# Iceberg 特定优化
spark.sql.iceberg.metadata.cache-enabled     true
spark.sql.iceberg.metadata.cache-ttl-ms      30000
spark.sql.iceberg.metadata.expire-after-access-ms 60000

# 执行器配置
spark.executor.memory                        2g
spark.executor.cores                         2
spark.driver.memory                          1g