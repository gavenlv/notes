## 1.Install mongo DBA tools
```bash
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -
# wget：是一个常用的命令行工具，用于从网络上下载文件。
# -qO -：这是 wget 命令的选项之一。-q 表示静默模式，不显示下载过程中的详细信息；-O - 指定将下载的内容输出到标准输出流（stdout）中。
# https://www.mongodb.org/static/pgp/server-6.0.asc：这是要下载的文件的 URL，即 MongoDB 官方的 GPG 密钥文件的地址。
# |：管道符号，用于将前一个命令的输出作为后一个命令的输入。
# sudo apt-key add -：sudo 是以管理员权限运行命令的关键词；apt-key 是用于管理系统密钥的工具；add - 表示将前一个命令的输出作为输入，并将其添加到系统的密钥管理工具中。

echo “deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/6.0 multiverse” | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list

# echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/6.0 multiverse"：这是一个 echo 命令，用于将引号内的文本输出到标准输出流（stdout）。在这里，它输出了一个包含 MongoDB 6.0 版本软件源的字符串。

# |：管道符号，用于将前一个命令的输出作为后一个命令的输入。

# sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list：sudo 是以管理员权限运行命令的关键词；tee 是一个命令行工具，用于从标准输入流（stdin）读取数据并写入文件。在这里，它将前一个命令的输出写入到 /etc/apt/sources.list.d/mongodb-org-6.0.list 文件中。

sudo apt-get update
sudo apt-get install -y mongodb-org

```
## 2. Backup: mongodump
```bash
 mongodump \
 -v \
 --gzip \
 --archive=backup.gz \
 "mongodb+srv://dbaTestAdmin@cluster1.xwgj1.mongodb.net/sample_analytics"

# --out
#  --db
#  --collection
#  --readPreference
#  --gzip
#  --archive
#  --oplog

```

## 3. Restore: mongorestore
```bash
# Restores all of the databases running on the cluster at the URI "mongodb+srv://dbaTestAdmin@cluster1.xwgj1.mongodb.net/" from a file called backup.gz
# Unzips the file by using --gzip
# Drops any existing data before restoring the cluster with the data in the file
mongorestore \
-v \
--gzip \
--archive-backup.gz \
--drop \
"mongodb+srv://dbaTestAdmin@cluster1.xwgj1.mongodb.net"

# other options
--nsInclude
--nsExclude
--drop
--noIndexRestore
--writeConcern
--gzip
--archive
--oplogReplay
```
###  Other options see links [mongorestore](https://www.mongodb.com/docs/database-tools/mongorestore/)


## 4. Export: mongoexport [mongoexport docs](https://www.mongodb.com/docs/database-tools/mongoexport/)
```bash
mongoexport \
-v \
--collection transactions \
--query '{"transaction_count": {"$gte": 50}}' \
--out export.json \
--jsonFormat canonical \
```
## 5. Import: mongoimport
```bash
mongoimport \
 -v \
 --collection newCollection \
 --type json \
 --mode insert \
 --drop \
 --file export.json \
 "mongodb+srv://dbaTestAdmin@cluster1.xwgj1.mongodb.net/test”

 --db
 --collection
 --type
 --mode
 --upsertFields
 --drop
 --file
```


## 6. Diagnostic Tools: mongostat [link docs](https://www.mongodb.com/docs/database-tools/mongostat/)
```bash
mongostat “mongodb+srv://dbaTestAdmin@cluster0.mntqoh9.mongodb.net”
# only list some fields
mongostat -o="host, opcounters.insert.rate()=Insert Rate"

mongostat -o='host,opcounters.insert.rate()=Insert Rate,opcounters.query.rate()=Query Rate,opcounters.command.rate()=Command Rate' 
--rowcount=3 "mongodb+srv://dbaTestAdmin@m0cluster-restored.iy0a1o4.mongodb.net"

 --o
 --O
 --rowcount

# each 2 second
mongostat -o='host,opcounters.insert.rate()=Insert Rate,opcounters.query.rate()=Query Rate,opcounters.command.rate()=Command Rate' "mongodb+srv://username@businesscluster.iy0a1o4.mongodb.net" 2
```

## 7.Diagnostic Tools: mongotop 
```bash
# show every 2 seconds with 3 rows
mongotop “mongodb+srv://dbaTestAdmin@cluster0.mntqoh9.mongodb.net” 2 --rowcount=3
```

## 8: Diagnostic Tools: bsondump
```bash
bsondump --pretty accounts.bson
bsondump --type=debug accounts.bson

--outFile
--pretty
--type
```
## 9.GridFS Tools: mongofiles
```bash
mongofiles -v "mongodb+srv://hawaii-dba-labs-user:nNVAWqNmiz22GV7J@instruqttest.3xfvk.mongodb.net" \
--authenticationDatabase="admin" --db=dba-labs \
put mongodb_21cf5742_e9b4_11ee_88df_6b8e81d53e02.png

mongofiles "mongodb+srv://hawaii-dba-labs-user:nNVAWqNmiz22GV7J@instruqttest.3xfvk.mongodb.net" \
--authenticationDatabase "admin" --db=dba-labs list

#other options
--db
--local
--replace
--writeConcern
--readPreference
```