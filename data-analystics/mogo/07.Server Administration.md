## 1. Install MongoDB Community Edition
```bash
#add pgp
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -
# add source package list
echo “deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/6.0 multiverse” | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list

# apt package update
sudo apt-get update
# install
sudo apt-get install -y mongodb-org

```
## 2. Start, Stop, and Check the Status of mongod
```bash
# startup service
sudo systemctl start mongod
# check status
sudo systemctl status mongod
# stop service
sudo systemctl status mongod
```
## 3. Default mongod.conf
```yml
# mongod.conf

# for documentation of all options, see:
#   http://docs.mongodb.org/manual/reference/configuration-options/

# Where and how to store data.
storage:
  dbPath: /var/lib/mongodb
  journal:
    enabled: true
#  engine:
  wiredTiger:
    engineConfig:
      cacheSizeGB: 0.3

# where to write logging data.
systemLog:
  destination: file
  logAppend: true
  path: /var/log/mongodb/mongod.log

# network interfaces
net:
  port: 27017
  bindIp: 127.0.0.1

# how the process runs
processManagement:
  timeZoneInfo: /usr/share/zoneinfo
  fork: true
  
#security:

#operationProfiling:

#replication:

#sharding:

## Enterprise-Only Options:

#auditLog:

```

## 4. Validate port change
```bash
ss -ltp | grep mongod
# ss: This command is used to retrieve information about active network sockets, including listening ports, established connections, and more.

# -ltp: These options are used as arguments to the ss command:

# -l stands for "listening" and shows only the listening sockets.
# -t filters the output to display only TCP sockets.
# -p shows the process or program associated with each socket.
```

## 5. Initial user creation 
```bash
# local connect
mongosh
# can use below command when no use created
use admin
db.createUser({
    user: "dbaTestAdmin",
    pwd: "dbaTestPassword",
    roles: [{role:"root", db: "admin"}]
})

#list all users
show users
```
## 6. Admin command
```bash
# use adminCommand to create a new user
db.adminCommand({
    createUser: "dbaTestAdmin",
    pwd: "dbaTestPassword",
    roles: [
        {role: "userAdminAnyDatabase", db: "admin"}
    ]
})

db.auth("dbaTestAdmin", passwordPrompt())
# user adminCommand to shutdown mongodb
db.adminCommand({shutdown: 1})

# help
db.help()
```

## 7. Monitoring
```bash
#check the log path
mongosh
#below command in mongosh
db.serverCmdLineOpts().parsed.systemLog.path
show logs
show logs global
```
## 8. Log file format
Refer to [log messages](https://www.mongodb.com/docs/manual/reference/log-messages/)
```json
{
  "t": <Datetime>, // timestamp
  "s": <String>, // severity
  "c": <String>, // component
  "id": <Integer>, // unique identifier
  "ctx": <String>, // context
  "msg": <String>, // message body
  "attr": <Object> // additional attributes (optional)
  "tags": <Array of strings> // tags (optional)
  "truncated": <Object> // truncation info (if truncated)
  "size": <Object> // original size of entry (if truncated)
}
```


