## 1. Sort
```bash
db.collection.find(<query>).sort(<sort>)
db.companies.find({ category_code: "music" }).sort({ name: 1 });
// Return data on all music companies, sorted alphabetically from A to Z. Ensure consistent sort order
db.companies.find({ category_code: "music" }).sort({ name: 1, _id: 1 });
```

## 2. Limit Result
```bash
cursor.limit()
db.companies.find(<query>).limit(<number>)
// Return the three music companies with the highest number of employees. Ensure consistent sort order.
db.companies
  .find({ category_code: "music" })
  .sort({ number_of_employees: -1, _id: 1 })
  .limit(3);
```


## 3. Projection
```bash
db.collection.find( <query>, <projection> )
//include
db.collection.find( <query>, { <field> : 1 })
// Return all restaurant inspections - business name, result, and _id fields only
db.inspections.find(
  { sector: "Restaurant - 818" },
  { business_name: 1, result: 1 }
)

//Exclude a Field
db.collection.find(query, { <field> : 0, <field>: 0 })
// Return all inspections with result of "Pass" or "Warning" 
- exclude date and zip code
db.inspections.find(
  { result: { $in: ["Pass", "Warning"] } },
  { date: 0, "address.zip": 0 }
)

//While the _id field is included by default, it can be suppressed by setting its value to 0 in any projection.
// Return all restaurant inspections - business name and result fields only
db.inspections.find(
  { sector: "Restaurant - 818" },
  { business_name: 1, result: 1, _id: 0 }
)



```
## 4. Count 
```bash
db.collection.countDocuments( <query>, <options> )
// Count number of trips over 120 minutes by subscribers
db.trips.countDocuments({ tripduration: { $gt: 120 }, usertype: "Subscriber" })

```

## 5. Match an Array
### 5.1 Exactly match
```bash
db.inventory.find({tags: ["red", "blank"]})
```
### 5.2 Contains both elements without regard order
```bash
db.inventory.find({tags: {$all: ["red", "blank"]}})
```
### 5.3 Contains only one element
```bash
db.inventory.find({tags: "red"})
```
### 5.4 Compare array element at least one element match
```bash
db.inventory.find({dim_cm: {$gt: 25}})
```
### 5.5 Match multiple criteria
```bash
db.inventory.find({dim_cm: {$elemMatch: {$gt: 22, $lt: 30}}})
```
### 5.6 Query an array by match array length
```bash
db.inventory.find({"tags": {$size: 3}})
```

## 6. Query an Array of Embedded Documents
### 6.1 Prepare Test data
```bash
db.inventory.insertMany( [
   { item: "journal", instock: [ { warehouse: "A", qty: 5 }, { warehouse: "C", qty: 15 } ] },
   { item: "notebook", instock: [ { warehouse: "C", qty: 5 } ] },
   { item: "paper", instock: [ { warehouse: "A", qty: 60 }, { warehouse: "B", qty: 15 } ] },
   { item: "planner", instock: [ { warehouse: "A", qty: 40 }, { warehouse: "B", qty: 5 } ] },
   { item: "postcard", instock: [ { warehouse: "B", qty: 15 }, { warehouse: "C", qty: 35 } ] }
]);
```
### 6.2 Exactly match, including order and all fields
```bash
db.inventory.find({instock: {warehouse: "A", qty: 40}})
```
### 6.3 Specify a query condition on a field embedded in an array
```bash
# any meet criteria documet listed
db.inventory.find({"instock.qty": {$lte: 20}})
```
### 6.4. use array index field
```bash
db.inventory.find( { 'instock.0.qty': { $lte: 20 } } )
```
### 6.5 $elemMatch, at least one embedded document satisfies all the specified criteria
```bash
db.inventory.find({"instock": {$elemMatch: {qty: 5, warehouse: "A"}}})

db.inventory.find( { "instock": { $elemMatch: { qty: { $gt: 10, $lte: 20 } } } } )
```
### 6.6 At least meet on criteria 
```bash
# any array in instock with qty 10 <= 20
db.inventory.find( { "instock.qty": { $gt: 10,  $lte: 20 } } )

## equal to or with different field
db.inventory.find( { "instock.qty": 5, "instock.warehouse": "A" } )
```
