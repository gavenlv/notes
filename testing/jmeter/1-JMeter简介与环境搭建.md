# ç¬¬1ç« ï¼šJMeterç®€ä»‹ä¸ç¯å¢ƒæ­å»º

## 1.1 JMeteræ˜¯ä»€ä¹ˆï¼Ÿ

### 1.1.1 JMeterçš„å®šä¹‰

Apache JMeter æ˜¯ä¸€ä¸ªå¼€æºçš„ã€çº¯Javaç¼–å†™çš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼Œä¸»è¦ç”¨äºå¯¹Webåº”ç”¨ç¨‹åºè¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œè´Ÿè½½æµ‹è¯•ã€‚å®ƒå¯ä»¥æ¨¡æ‹Ÿå¤§é‡ç”¨æˆ·å¹¶å‘è®¿é—®ç›®æ ‡æœåŠ¡å™¨ï¼Œä»è€Œæµ‹è¯•æœåŠ¡å™¨çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- ğŸš€ **å¤šåè®®æ”¯æŒ**ï¼šæ”¯æŒHTTPã€HTTPSã€FTPã€SOAPã€RESTã€JDBCç­‰å¤šç§åè®®
- ğŸ“Š **å¯è§†åŒ–ç»“æœ**ï¼šæä¾›ä¸°å¯Œçš„å›¾è¡¨å’ŒæŠ¥å‘Šå±•ç¤ºæµ‹è¯•ç»“æœ
- ğŸ§ª **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒæ’ä»¶æ‰©å±•ï¼Œæ»¡è¶³å„ç§å¤æ‚æµ‹è¯•éœ€æ±‚
- ğŸ’» **è·¨å¹³å°**ï¼šåŸºäºJavaå¼€å‘ï¼Œå¯åœ¨ä»»ä½•æ”¯æŒJavaçš„å¹³å°ä¸Šè¿è¡Œ
- ğŸ”„ **è„šæœ¬å½•åˆ¶**ï¼šæ”¯æŒHTTPä»£ç†æœåŠ¡å™¨å½•åˆ¶æµ‹è¯•è„šæœ¬

### 1.1.2 JMeterçš„åº”ç”¨åœºæ™¯

| åº”ç”¨åœºæ™¯ | æè¿° | æµ‹è¯•ç›®æ ‡ |
|---------|------|----------|
| **è´Ÿè½½æµ‹è¯•** | æ¨¡æ‹Ÿæ­£å¸¸ç”¨æˆ·è®¿é—®é‡ | éªŒè¯ç³»ç»Ÿåœ¨æ­£å¸¸è´Ÿè½½ä¸‹çš„æ€§èƒ½ |
| **å‹åŠ›æµ‹è¯•** | æ¨¡æ‹Ÿæç«¯é«˜å¹¶å‘è®¿é—® | æµ‹è¯•ç³»ç»Ÿæé™æ€§èƒ½å’Œç¨³å®šæ€§ |
| **æ€§èƒ½æµ‹è¯•** | æµ‹é‡ç³»ç»Ÿå“åº”æ—¶é—´ã€ååé‡ | è¯„ä¼°ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡ |
| **åŠŸèƒ½æµ‹è¯•** | éªŒè¯APIæ¥å£åŠŸèƒ½æ­£ç¡®æ€§ | ç¡®ä¿æ¥å£é€»è¾‘æ­£ç¡® |
| **å›å½’æµ‹è¯•** | ç¡®ä¿ç³»ç»Ÿæ›´æ–°åæ€§èƒ½ç¨³å®š | é˜²æ­¢æ€§èƒ½å›å½’ |

## 1.2 JMeterç¯å¢ƒæ­å»º

### 1.2.1 å‰ç½®è¦æ±‚æ£€æŸ¥

åœ¨å®‰è£…JMeterä¹‹å‰ï¼Œéœ€è¦ç¡®ä¿ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

**Javaç¯å¢ƒæ£€æŸ¥ï¼š**
```bash
# æ£€æŸ¥Javaæ˜¯å¦å·²å®‰è£…
java -version

# æ£€æŸ¥Javaå®‰è£…è·¯å¾„
java -XshowSettings:properties -version 2>&1 | findstr "java.home"
```

**ç³»ç»Ÿè¦æ±‚ï¼š**
- **æ“ä½œç³»ç»Ÿ**ï¼šWindowsã€Linuxã€macOSç­‰
- **Javaç‰ˆæœ¬**ï¼šJava 8æˆ–æ›´é«˜ç‰ˆæœ¬
- **å†…å­˜**ï¼šè‡³å°‘2GBå¯ç”¨å†…å­˜
- **ç£ç›˜ç©ºé—´**ï¼šè‡³å°‘100MBå¯ç”¨ç©ºé—´

### 1.2.2 Javaç¯å¢ƒå®‰è£…ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰

**Windowsç³»ç»Ÿå®‰è£…Javaï¼š**

1. **ä¸‹è½½Java**ï¼šè®¿é—® [Oracleå®˜ç½‘](https://www.oracle.com/java/technologies/javase-jdk11-downloads.html) ä¸‹è½½JDK
2. **å®‰è£…JDK**ï¼šè¿è¡Œå®‰è£…ç¨‹åºï¼ŒæŒ‰ç…§æç¤ºå®Œæˆå®‰è£…
3. **é…ç½®ç¯å¢ƒå˜é‡**ï¼š
   ```cmd
   # è®¾ç½®JAVA_HOMEç¯å¢ƒå˜é‡
   setx JAVA_HOME "C:\Program Files\Java\jdk-11.0.xx"
   
   # æ·»åŠ Javaåˆ°PATH
   setx PATH "%PATH%;%JAVA_HOME%\bin"
   ```

**éªŒè¯Javaå®‰è£…ï¼š**
```bash
java -version
javac -version
```

### 1.2.3 JMeterå®‰è£…

#### æ–¹æ³•ä¸€ï¼šç›´æ¥ä¸‹è½½ï¼ˆæ¨èï¼‰

1. **ä¸‹è½½JMeter**ï¼š
   - è®¿é—® [Apache JMeterå®˜ç½‘](https://jmeter.apache.org/download_jmeter.cgi)
   - ä¸‹è½½æœ€æ–°çš„äºŒè¿›åˆ¶ç‰ˆæœ¬ï¼ˆå¦‚ï¼šapache-jmeter-5.6.3.zipï¼‰

2. **è§£å‹å®‰è£…**ï¼š
   ```bash
   # è§£å‹åˆ°æŒ‡å®šç›®å½•
   mkdir D:\tools\jmeter
   tar -xzf apache-jmeter-5.6.3.zip -C D:\tools\jmeter
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**ï¼ˆå¯é€‰ï¼‰ï¼š
   ```cmd
   # è®¾ç½®JMETER_HOMEç¯å¢ƒå˜é‡
   setx JMETER_HOME "D:\tools\jmeter\apache-jmeter-5.6.3"
   
   # æ·»åŠ JMeteråˆ°PATH
   setx PATH "%PATH%;%JMETER_HOME%\bin"
   ```

#### æ–¹æ³•äºŒï¼šä½¿ç”¨åŒ…ç®¡ç†å™¨ï¼ˆLinux/macOSï¼‰

```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install jmeter

# macOS (ä½¿ç”¨Homebrew)
brew install jmeter
```

### 1.2.4 éªŒè¯å®‰è£…

**å¯åŠ¨JMeter GUIï¼š**
```bash
# Windows
jmeter.bat

# Linux/macOS
jmeter.sh
```

**éªŒè¯å¯åŠ¨æˆåŠŸï¼š**
- åº”è¯¥çœ‹åˆ°JMeterå›¾å½¢ç•Œé¢å¯åŠ¨
- æ£€æŸ¥èœå•æ æ˜¯å¦æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
- ç¡®è®¤æµ‹è¯•è®¡åˆ’æ ‘å½¢ç»“æ„æ­£å¸¸æ˜¾ç¤º

## 1.3 ç¬¬ä¸€ä¸ªJMeteræµ‹è¯•

### 1.3.1 åˆ›å»ºç®€å•çš„HTTPæµ‹è¯•

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„HTTPè¯·æ±‚æµ‹è¯•æ¥éªŒè¯å®‰è£…ï¼š

**æ­¥éª¤1ï¼šåˆ›å»ºæµ‹è¯•è®¡åˆ’**
1. å¯åŠ¨JMeter GUI
2. å³é”®ç‚¹å‡»"Test Plan" â†’ "Add" â†’ "Threads (Users)" â†’ "Thread Group"

**æ­¥éª¤2ï¼šé…ç½®çº¿ç¨‹ç»„**
- **Number of Threads (users)**ï¼š1ï¼ˆæ¨¡æ‹Ÿ1ä¸ªç”¨æˆ·ï¼‰
- **Ramp-up period (seconds)**ï¼š1ï¼ˆ1ç§’å†…å¯åŠ¨æ‰€æœ‰çº¿ç¨‹ï¼‰
- **Loop Count**ï¼š1ï¼ˆæ‰§è¡Œ1æ¬¡ï¼‰

**æ­¥éª¤3ï¼šæ·»åŠ HTTPè¯·æ±‚**
1. å³é”®ç‚¹å‡»"Thread Group" â†’ "Add" â†’ "Sampler" â†’ "HTTP Request"
2. é…ç½®HTTPè¯·æ±‚ï¼š
   - **Name**ï¼šæµ‹è¯•ç™¾åº¦é¦–é¡µ
   - **Server Name or IP**ï¼šwww.baidu.com
   - **Port Number**ï¼š80
   - **Path**ï¼š/ï¼ˆæ ¹è·¯å¾„ï¼‰

**æ­¥éª¤4ï¼šæ·»åŠ ç»“æœç›‘å¬å™¨**
1. å³é”®ç‚¹å‡»"Thread Group" â†’ "Add" â†’ "Listener" â†’ "View Results Tree"
2. å³é”®ç‚¹å‡»"Thread Group" â†’ "Add" â†’ "Listener" â†’ "Summary Report"

**æ­¥éª¤5ï¼šè¿è¡Œæµ‹è¯•**
- ç‚¹å‡»å·¥å…·æ çš„"Start"æŒ‰é’®ï¼ˆç»¿è‰²ä¸‰è§’å½¢ï¼‰
- åœ¨"View Results Tree"ä¸­æŸ¥çœ‹è¯¦ç»†ç»“æœ
- åœ¨"Summary Report"ä¸­æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

### 1.3.2 æµ‹è¯•ç»“æœåˆ†æ

**æˆåŠŸæ ‡å¿—ï¼š**
- **å“åº”ä»£ç **ï¼š200ï¼ˆè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼‰
- **å“åº”æ•°æ®**ï¼šåŒ…å«ç™¾åº¦é¦–é¡µçš„HTMLå†…å®¹
- **å“åº”æ—¶é—´**ï¼šåˆç†èŒƒå›´å†…ï¼ˆé€šå¸¸å‡ ç™¾æ¯«ç§’ï¼‰

**å¸¸è§é—®é¢˜æ’æŸ¥ï¼š**
```bash
# å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œå…ˆæ£€æŸ¥ç½‘ç»œè¿æ¥
ping www.baidu.com

# æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
netsh advfirewall firewall show rule name=all
```

## 1.4 JMeterç›®å½•ç»“æ„è§£æ

å®‰è£…å®Œæˆåï¼Œäº†è§£JMeterçš„ç›®å½•ç»“æ„å¾ˆé‡è¦ï¼š

```
apache-jmeter-5.6.3/
â”œâ”€â”€ bin/                    # å¯æ‰§è¡Œæ–‡ä»¶å’Œé…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ jmeter.bat         # Windowså¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ jmeter.sh          # Linux/macOSå¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ jmeter.properties  # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ user.properties    # ç”¨æˆ·é…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/                  # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ extras/                # é¢å¤–å·¥å…·å’Œæ’ä»¶
â”œâ”€â”€ lib/                   # JMeteræ ¸å¿ƒåº“æ–‡ä»¶
â”‚   â””â”€â”€ ext/              # æ‰©å±•åº“ç›®å½•
â”œâ”€â”€ printable_docs/        # å¯æ‰“å°æ–‡æ¡£
â””â”€â”€ licenses/             # è®¸å¯è¯æ–‡ä»¶
```

**é‡è¦é…ç½®æ–‡ä»¶è¯´æ˜ï¼š**

**jmeter.properties** - ä¸»è¦é…ç½®ï¼š
```properties
# è®¾ç½®è¯­è¨€
language=zh_CN

# è®¾ç½®é»˜è®¤ä¿å­˜è·¯å¾„
jmeter.save.saveservice.base_dir=./results

# è®¾ç½®é»˜è®¤çº¿ç¨‹æ•°
jmeter.threads=10
```

**user.properties** - ç”¨æˆ·ä¸ªæ€§åŒ–é…ç½®ï¼š
```properties
# è®¾ç½®ç•Œé¢ä¸»é¢˜
jmeter.theme=Darklaf

# è®¾ç½®é»˜è®¤ç›‘å¬å™¨
jmeter.gui.action.listeners=ViewResultsTree,SummaryReport
```

## 1.5 å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šJavaç¯å¢ƒé—®é¢˜
**ç—‡çŠ¶**ï¼šå¯åŠ¨æ—¶æç¤º"Java not found"æˆ–ç‰ˆæœ¬ä¸å…¼å®¹
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥Javaç‰ˆæœ¬
java -version

# å¦‚æœç‰ˆæœ¬ä½äº8ï¼Œå‡çº§Java
# ä¸‹è½½å¹¶å®‰è£…Java 8æˆ–æ›´é«˜ç‰ˆæœ¬
```

### é—®é¢˜2ï¼šå†…å­˜ä¸è¶³
**ç—‡çŠ¶**ï¼šæµ‹è¯•è¿è¡Œæ—¶å‡ºç°OutOfMemoryError
**è§£å†³æ–¹æ¡ˆ**ï¼šä¿®æ”¹å¯åŠ¨è„šæœ¬å†…å­˜è®¾ç½®
```bash
# ç¼–è¾‘ bin/jmeter.batï¼ˆWindowsï¼‰æˆ– bin/jmeter.shï¼ˆLinuxï¼‰
# å¢åŠ å†…å­˜åˆ†é…
set HEAP=-Xms512m -Xmx2048m
```

### é—®é¢˜3ï¼šä¸­æ–‡ä¹±ç 
**ç—‡çŠ¶**ï¼šç•Œé¢æˆ–å“åº”å†…å®¹æ˜¾ç¤ºä¹±ç 
**è§£å†³æ–¹æ¡ˆ**ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶
```properties
# åœ¨ bin/jmeter.properties ä¸­æ·»åŠ 
sampleresult.default.encoding=UTF-8
```

## 1.6 æœ¬ç« å°ç»“

### å­¦ä¹ è¦ç‚¹å›é¡¾
- âœ… äº†è§£äº†JMeterçš„åŸºæœ¬æ¦‚å¿µå’Œåº”ç”¨åœºæ™¯
- âœ… æˆåŠŸå®‰è£…äº†Javaç¯å¢ƒå’ŒJMeter
- âœ… åˆ›å»ºå¹¶è¿è¡Œäº†ç¬¬ä¸€ä¸ªç®€å•çš„HTTPæµ‹è¯•
- âœ… ç†Ÿæ‚‰äº†JMeterçš„ç›®å½•ç»“æ„å’Œé…ç½®æ–‡ä»¶
- âœ… æŒæ¡äº†å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•

### å®è·µç»ƒä¹ 

**ç»ƒä¹ 1ï¼šç¯å¢ƒéªŒè¯**
1. ç¡®ä¿Javaç¯å¢ƒæ­£ç¡®å®‰è£…
2. éªŒè¯JMeterèƒ½å¤Ÿæ­£å¸¸å¯åŠ¨
3. åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªæµ‹è¯•Googleé¦–é¡µçš„ç®€å•è„šæœ¬

**ç»ƒä¹ 2ï¼šé…ç½®ä¼˜åŒ–**
1. ä¿®æ”¹jmeter.propertiesæ–‡ä»¶ï¼Œè®¾ç½®ä¸­æ–‡ç•Œé¢
2. è°ƒæ•´JMeterå¯åŠ¨å†…å­˜å‚æ•°
3. é…ç½®é»˜è®¤ä¿å­˜è·¯å¾„

### ä¸‹ä¸€ç« é¢„å‘Š

åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥å­¦ä¹ JMeterçš„æ ¸å¿ƒç»„ä»¶å’Œå·¥ä½œåŸç†ï¼ŒåŒ…æ‹¬ï¼š
- JMeterçš„æ¶æ„å’Œå·¥ä½œæµç¨‹
- æ ¸å¿ƒç»„ä»¶è¯¦è§£ï¼ˆçº¿ç¨‹ç»„ã€é‡‡æ ·å™¨ã€ç›‘å¬å™¨ç­‰ï¼‰
- æµ‹è¯•è®¡åˆ’çš„ç»„ç»‡ç»“æ„
- å„ç§é…ç½®å…ƒç´ çš„ä½¿ç”¨æ–¹æ³•

---

**ç»§ç»­å­¦ä¹ ï¼š** [ç¬¬2ç«  - JMeteråŸºç¡€æ¦‚å¿µä¸æ ¸å¿ƒç»„ä»¶](./2-JMeteråŸºç¡€æ¦‚å¿µä¸æ ¸å¿ƒç»„ä»¶.md)