# 第3章 — 隔离、生命周期（setup/teardown）与 Fixtures

目标：
- 学会如何初始化和清理测试状态。
- 理解 pytest fixtures 与 unittest setUp/tearDown 的用法与差异。

内容要点：
- 在 pytest 中使用 fixture 通过 `@pytest.fixture` 定义共享或作用域有限的资源。
- 使用 `autouse=True` 可以让特定 fixture 自动应用。
- 在 unittest 中使用 `setUp` / `tearDown`，或者 `setUpClass` / `tearDownClass` 来控制 class 级别资源。

示例：`testing/unit-test/code/chapter3/` 包含 pytest fixture 示例。

最佳实践
- 优先使用小作用域（function）以保证测试隔离。
- 如果 fixture 含有副作用，确保 teardown 逻辑完整。
- 避免在 fixture 中做大量逻辑：此处仅做资源准备。

练习
- 将 `chapter2.Counter` 的测试改成使用 fixture 提供 `Counter` 实例。