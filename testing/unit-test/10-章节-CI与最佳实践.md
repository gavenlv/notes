# 第10章 — 在 CI 中运行测试与最佳实践

目标：
- 将测试集成到 CI（以 GitHub Actions 为例）。
- 了解在 CI 中的常见做法与陷阱。

GitHub Actions 示例（位于仓库根的 `.github/workflows/ci.yml`，或在项目中按需放置）

示例工作流要点：
- 在每次 PR/merge 时安装依赖并运行 `pytest`，生成 coverage 报告并上传。
- 缓存依赖以加速。

最佳实践清单
- 在 CI 中运行快速且稳定的测试套件（unit tests）。
- 把慢测试标记为 integration 或 smoke 并单独运行。
- 把 flaky tests 修复或移到单独的步骤并尽快修复。

练习
- 在你的仓库中添加一个 GitHub Actions workflow 用来运行 `pytest`。