# 第1章 设计模式基础概念与分类

## 1.1 什么是设计模式

### 1.1.1 定义

设计模式（Design Pattern）是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。它不是具体的代码，而是一种解决问题的模板或者指导思想。

设计模式的概念最早由四位世界顶级的面向对象技术专家（Gang of Four，简称GoF）在他们的著作《设计模式：可复用面向对象软件的基础》中提出。书中提出了23种经典的设计模式，这些模式至今仍广泛应用于软件开发中。

### 1.1.2 设计模式的作用

1. **提高代码复用性**：合理使用设计模式可以减少重复代码的编写
2. **提高代码可维护性**：良好的设计模式使得代码结构清晰，易于理解和修改
3. **提高代码可扩展性**：设计模式通常具有良好的扩展性，便于后续功能增加
4. **提高开发效率**：成熟的模式可以直接应用，减少思考时间
5. **便于团队协作**：统一的设计模式有助于团队成员之间的沟通

## 1.2 设计模式的基本要素

每个设计模式都基于以下几个基本要素：

1. **模式名称（Pattern Name）**：一个助记名，描述设计模式的问题、解决方案和效果
2. **问题（Problem）**：描述何时使用模式，解释设计问题和上下文
3. **解决方案（Solution）**：描述设计的组成成分、它们之间的相互关系及各自的职责和协作方式
4. **效果（Consequences）**：描述应用模式产生的结果和副作用

## 1.3 设计模式的分类

根据目的和范围，设计模式可以分为以下三类：

### 1.3.1 根据目的分类

#### 创建型模式（Creational Patterns）
创建型模式关注对象的创建过程，将对象的创建与使用分离，降低系统的耦合度。

主要的创建型模式包括：
- 单例模式（Singleton Pattern）
- 工厂方法模式（Factory Method Pattern）
- 抽象工厂模式（Abstract Factory Pattern）
- 建造者模式（Builder Pattern）
- 原型模式（Prototype Pattern）

#### 结构型模式（Structural Patterns）
结构型模式关注如何将类或对象组合成更大的结构，同时保持结构的灵活性和高效性。

主要的结构型模式包括：
- 适配器模式（Adapter Pattern）
- 桥接模式（Bridge Pattern）
- 组合模式（Composite Pattern）
- 装饰器模式（Decorator Pattern）
- 外观模式（Facade Pattern）
- 享元模式（Flyweight Pattern）
- 代理模式（Proxy Pattern）

#### 行为型模式（Behavioral Patterns）
行为型模式关注对象之间的职责分配和通信，不仅描述对象或类的模式，还描述它们之间的通信模式。

主要的行为型模式包括：
- 责任链模式（Chain of Responsibility Pattern）
- 命令模式（Command Pattern）
- 解释器模式（Interpreter Pattern）
- 迭代器模式（Iterator Pattern）
- 中介者模式（Mediator Pattern）
- 备忘录模式（Memento Pattern）
- 观察者模式（Observer Pattern）
- 状态模式（State Pattern）
- 策略模式（Strategy Pattern）
- 模板方法模式（Template Method Pattern）
- 访问者模式（Visitor Pattern）

### 1.3.2 根据范围分类

#### 类模式（Class Patterns）
处理类和子类之间的关系，这些关系通过继承建立，在编译时刻就被确定下来，是一种静态关系。

#### 对象模式（Object Patterns）
处理对象间的关系，这些关系在运行时刻是可以变化的，更具动态性。

## 1.4 面向对象设计原则

设计模式是基于面向对象设计原则的，理解这些原则有助于更好地应用设计模式。

### 1.4.1 开闭原则（Open-Closed Principle）
对扩展开放，对修改关闭。即软件实体（类、模块、函数等）应该可以扩展，但是不可修改。

### 1.4.2 里氏替换原则（Liskov Substitution Principle）
所有引用基类的地方必须能透明地使用其子类的对象。

### 1.4.3 依赖倒置原则（Dependency Inversion Principle）
高层模块不应该依赖低层模块，二者都应该依赖其抽象；抽象不应该依赖细节；细节应该依赖抽象。

### 1.4.4 单一职责原则（Single Responsibility Principle）
一个类应该只有一个引起它变化的原因。

### 1.4.5 接口隔离原则（Interface Segregation Principle）
客户端不应该依赖它不需要的接口；一个类对另一个类的依赖应该建立在最小的接口上。

### 1.4.6 迪米特法则（Law of Demeter）
一个对象应该对其他对象保持最少的了解。

### 1.4.7 合成复用原则（Composite Reuse Principle）
尽量使用对象组合，而不是继承来达到复用的目的。

## 1.5 如何学习设计模式

1. **理解概念**：首先要理解每种设计模式解决的问题和适用场景
2. **掌握结构**：理解设计模式的类图结构和关键角色
3. **动手实践**：通过编写代码来加深理解
4. **识别应用场景**：学会在实际开发中识别何时使用哪种设计模式
5. **避免过度设计**：不要为了使用模式而使用模式，应根据实际需求选择

## 1.6 本章小结

本章介绍了设计模式的基本概念、分类和面向对象设计原则。设计模式是对软件设计中普遍存在（反复出现）的各种问题所提出的解决方案，掌握设计模式对于提高软件质量和开发效率具有重要意义。

在后续章节中，我们将逐一详细介绍各种设计模式的具体实现和应用场景。