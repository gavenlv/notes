# 5.3 JSON转换与处理

## JSON转换概述

JSON转换是指将JSON数据从一种格式或结构转换为另一种格式或结构的过程。这在数据集成、API响应处理、数据清洗和分析等场景中非常重要。

## JSON数据转换场景

### 1. 结构重组

改变JSON数据的结构以适应不同的需求：

```json
// 原始数据 - 扁平结构
{
  "users": [
    {
      "id": "user_001",
      "name": "张三",
      "city": "北京",
      "country": "中国"
    },
    {
      "id": "user_002",
      "name": "李四",
      "city": "上海",
      "country": "中国"
    },
    {
      "id": "user_003",
      "name": "王五",
      "city": "纽约",
      "country": "美国"
    }
  ]
}
```

```json
// 转换后 - 按国家分组的嵌套结构
{
  "byCountry": {
    "中国": {
      "cities": {
        "北京": [
          {
            "id": "user_001",
            "name": "张三"
          }
        ],
        "上海": [
          {
            "id": "user_002",
            "name": "李四"
          }
        ]
      },
      "totalUsers": 2
    },
    "美国": {
      "cities": {
        "纽约": [
          {
            "id": "user_003",
            "name": "王五"
          }
        ]
      },
      "totalUsers": 1
    }
  },
  "totalCountries": 2,
  "totalUsers": 3
}
```

### 2. 数据过滤与清洗

移除不需要的字段，修正错误数据：

```json
// 原始数据
{
  "users": [
    {
      "id": "user_001",
      "name": "张三",
      "email": "zhangsan@example.com",
      "age": 30,
      "password": "secret123",  // 敏感信息，需要移除
      "lastLogin": "2023-07-15T08:30:00Z",
      "isActive": true,
      "registrationDate": "2020-01-15",
      "emptyField": "",  // 空字段
      "notes": null       // null值
    },
    {
      "id": "user_002",
      "name": "李四",
      "email": "lisi@example.com",
      "age": -5,           // 无效数据，需要修正
      "password": "password456",
      "lastLogin": "2023-07-14T16:45:00Z",
      "isActive": false,
      "registrationDate": "2021-03-22",
      "emptyField": "",
      "notes": "一些备注"
    }
  ]
}
```

```json
// 转换后 - 清洗后的数据
{
  "users": [
    {
      "id": "user_001",
      "name": "张三",
      "email": "zhangsan@example.com",
      "age": 30,
      "lastLogin": "2023-07-15T08:30:00Z",
      "isActive": true,
      "registrationDate": "2020-01-15"
    },
    {
      "id": "user_002",
      "name": "李四",
      "email": "lisi@example.com",
      "age": null,  // 无效数据设为null
      "lastLogin": "2023-07-14T16:45:00Z",
      "isActive": false,
      "registrationDate": "2021-03-22",
      "notes": "一些备注"  // 保留非空备注
    }
  ]
}
```

### 3. 数据聚合与计算

对JSON数据进行聚合计算和统计：

```json
// 原始数据
{
  "orders": [
    {
      "id": "order_001",
      "customerId": "customer_001",
      "items": [
        {
          "productId": "prod_001",
          "name": "智能手机",
          "quantity": 1,
          "unitPrice": 5999,
          "category": "电子产品"
        },
        {
          "productId": "prod_002",
          "name": "手机壳",
          "quantity": 2,
          "unitPrice": 49.99,
          "category": "配件"
        }
      ],
      "orderDate": "2023-07-15"
    },
    {
      "id": "order_002",
      "customerId": "customer_002",
      "items": [
        {
          "productId": "prod_003",
          "name": "笔记本电脑",
          "quantity": 1,
          "unitPrice": 8999,
          "category": "电子产品"
        }
      ],
      "orderDate": "2023-07-14"
    },
    {
      "id": "order_003",
      "customerId": "customer_001",
      "items": [
        {
          "productId": "prod_004",
          "name": "无线耳机",
          "quantity": 1,
          "unitPrice": 299,
          "category": "配件"
        }
      ],
      "orderDate": "2023-07-13"
    }
  ]
}
```

```json
// 转换后 - 聚合数据
{
  "summary": {
    "totalOrders": 3,
    "totalRevenue": 15396.97,
    "averageOrderValue": 5132.32,
    "ordersByCustomer": {
      "customer_001": {
        "orderCount": 2,
        "totalSpent": 6397.97
      },
      "customer_002": {
        "orderCount": 1,
        "totalSpent": 8999
      }
    },
    "revenueByCategory": {
      "电子产品": 14998,
      "配件": 398.97
    },
    "topSellingProducts": [
      {
        "productId": "prod_003",
        "name": "笔记本电脑",
        "totalRevenue": 8999,
        "unitsSold": 1
      },
      {
        "productId": "prod_001",
        "name": "智能手机",
        "totalRevenue": 5999,
        "unitsSold": 1
      }
    ]
  },
  "dailyRevenue": [
    {
      "date": "2023-07-13",
      "revenue": 299
    },
    {
      "date": "2023-07-14",
      "revenue": 8999
    },
    {
      "date": "2023-07-15",
      "revenue": 6098.97
    }
  ]
}
```

## JSON转换技术与工具

### 1. JavaScript中的JSON转换

使用JavaScript进行JSON转换：

```javascript
// 数据转换工具函数
const jsonTransformer = {
  // 扁平化嵌套对象
  flatten: function(obj, prefix = '') {
    let result = {};
    
    for (const key in obj) {
      if (obj.hasOwnProperty(key)) {
        const newKey = prefix ? `${prefix}.${key}` : key;
        
        if (typeof obj[key] === 'object' && obj[key] !== null && !Array.isArray(obj[key])) {
          result = {...result, ...this.flatten(obj[key], newKey)};
        } else {
          result[newKey] = obj[key];
        }
      }
    }
    
    return result;
  },
  
  // 嵌套化扁平对象
  unflatten: function(flatObj) {
    const result = {};
    
    for (const key in flatObj) {
      if (flatObj.hasOwnProperty(key)) {
        this.setNestedValue(result, key.split('.'), flatObj[key]);
      }
    }
    
    return result;
  },
  
  // 设置嵌套对象的值
  setNestedValue: function(obj, path, value) {
    if (path.length === 1) {
      obj[path[0]] = value;
      return;
    }
    
    if (!obj[path[0]] || typeof obj[path[0]] !== 'object') {
      obj[path[0]] = {};
    }
    
    this.setNestedValue(obj[path[0]], path.slice(1), value);
  },
  
  // 重命名键
  renameKeys: function(obj, keyMap) {
    const result = {};
    
    for (const key in obj) {
      if (obj.hasOwnProperty(key)) {
        const newKey = keyMap[key] || key;
        
        if (typeof obj[key] === 'object' && obj[key] !== null && !Array.isArray(obj[key])) {
          result[newKey] = this.renameKeys(obj[key], keyMap);
        } else {
          result[newKey] = obj[key];
        }
      }
    }
    
    return result;
  },
  
  // 过滤对象
  filter: function(obj, predicate) {
    const result = {};
    
    for (const key in obj) {
      if (obj.hasOwnProperty(key)) {
        if (predicate(key, obj[key])) {
          if (typeof obj[key] === 'object' && obj[key] !== null && !Array.isArray(obj[key])) {
            result[key] = this.filter(obj[key], predicate);
          } else {
            result[key] = obj[key];
          }
        }
      }
    }
    
    return result;
  },
  
  // 转换数组为对象（以指定字段为键）
  arrayToObject: function(arr, keyField) {
    const result = {};
    
    for (const item of arr) {
      if (item[keyField]) {
        result[item[keyField]] = item;
      }
    }
    
    return result;
  },
  
  // 分组数组
  groupBy: function(arr, keyOrFunction) {
    const result = {};
    
    for (const item of arr) {
      let key;
      
      if (typeof keyOrFunction === 'function') {
        key = keyOrFunction(item);
      } else {
        key = item[keyOrFunction];
      }
      
      if (!result[key]) {
        result[key] = [];
      }
      
      result[key].push(item);
    }
    
    return result;
  }
};

// 使用示例
const nestedData = {
  user: {
    personal: {
      name: "张三",
      age: 30
    },
    contact: {
      email: "zhangsan@example.com",
      phone: "138-0000-0000"
    }
  }
};

// 扁平化
const flatData = jsonTransformer.flatten(nestedData);
console.log(flatData);
// 输出: { 
//   'user.personal.name': '张三',
//   'user.personal.age': 30,
//   'user.contact.email': 'zhangsan@example.com',
//   'user.contact.phone': '138-0000-0000'
// }

// 嵌套化
const nestedAgain = jsonTransformer.unflatten(flatData);
console.log(nestedAgain);

// 重命名键
const keyMap = {
  'user.personal.name': 'fullName',
  'user.personal.age': 'userAge',
  'user.contact.email': 'emailAddress',
  'user.contact.phone': 'phoneNumber'
};
const renamedData = jsonTransformer.renameKeys(flatData, keyMap);
console.log(renamedData);

// 过滤数据
const filteredData = jsonTransformer.filter(nestedData, (key, value) => {
  return key !== 'phone';  // 排除phone字段
});
console.log(filteredData);

// 数组转换为对象
const usersArray = [
  { id: 'user_001', name: '张三' },
  { id: 'user_002', name: '李四' }
];
const usersObject = jsonTransformer.arrayToObject(usersArray, 'id');
console.log(usersObject);
// 输出: {
//   'user_001': { id: 'user_001', name: '张三' },
//   'user_002': { id: 'user_002', name: '李四' }
// }

// 分组数组
const orders = [
  { id: 'order_001', customerId: 'customer_001', amount: 100 },
  { id: 'order_002', customerId: 'customer_002', amount: 200 },
  { id: 'order_003', customerId: 'customer_001', amount: 150 }
];
const ordersByCustomer = jsonTransformer.groupBy(orders, 'customerId');
console.log(ordersByCustomer);
```

### 2. Python中的JSON转换

使用Python进行JSON转换：

```python
import json
from collections import defaultdict

class JsonTransformer:
    @staticmethod
    def flatten(obj, parent_key='', sep='.'):
        """扁平化嵌套对象"""
        items = []
        
        if isinstance(obj, dict):
            for k, v in obj.items():
                new_key = f"{parent_key}{sep}{k}" if parent_key else k
                if isinstance(v, dict):
                    items.extend(JsonTransformer.flatten(v, new_key, sep=sep).items())
                else:
                    items.append((new_key, v))
        else:
            items.append((parent_key, obj))
        
        return dict(items)
    
    @staticmethod
    def unflatten(flat_dict, sep='.'):
        """嵌套化扁平对象"""
        result = {}
        
        for key, value in flat_dict.items():
            keys = key.split(sep)
            JsonTransformer._set_nested_value(result, keys, value)
        
        return result
    
    @staticmethod
    def _set_nested_value(obj, keys, value):
        """设置嵌套对象的值"""
        if len(keys) == 1:
            obj[keys[0]] = value
        else:
            if keys[0] not in obj:
                obj[keys[0]] = {}
            JsonTransformer._set_nested_value(obj[keys[0]], keys[1:], value)
    
    @staticmethod
    def rename_keys(obj, key_map):
        """重命名键"""
        if isinstance(obj, dict):
            result = {}
            for k, v in obj.items():
                new_key = key_map.get(k, k)
                if isinstance(v, (dict, list)):
                    result[new_key] = JsonTransformer.rename_keys(v, key_map)
                else:
                    result[new_key] = v
            return result
        elif isinstance(obj, list):
            return [JsonTransformer.rename_keys(item, key_map) for item in obj]
        else:
            return obj
    
    @staticmethod
    def filter(obj, predicate):
        """过滤对象"""
        if isinstance(obj, dict):
            result = {}
            for k, v in obj.items():
                if predicate(k, v):
                    if isinstance(v, (dict, list)):
                        result[k] = JsonTransformer.filter(v, predicate)
                    else:
                        result[k] = v
            return result
        elif isinstance(obj, list):
            return [JsonTransformer.filter(item, predicate) for item in obj]
        else:
            return obj
    
    @staticmethod
    def array_to_dict(arr, key_field):
        """转换数组为字典（以指定字段为键）"""
        result = {}
        for item in arr:
            if key_field in item:
                result[item[key_field]] = item
        return result
    
    @staticmethod
    def group_by(arr, key_or_func):
        """分组数组"""
        result = defaultdict(list)
        
        for item in arr:
            if callable(key_or_func):
                key = key_or_func(item)
            else:
                key = item[key_or_func]
            
            result[key].append(item)
        
        return dict(result)

# 使用示例
nested_data = {
    "user": {
        "personal": {
            "name": "张三",
            "age": 30
        },
        "contact": {
            "email": "zhangsan@example.com",
            "phone": "138-0000-0000"
        }
    }
}

# 扁平化
flat_data = JsonTransformer.flatten(nested_data)
print("扁平化数据:", flat_data)

# 嵌套化
nested_again = JsonTransformer.unflatten(flat_data)
print("嵌套化数据:", nested_again)

# 重命名键
key_map = {
    "user.personal.name": "fullName",
    "user.personal.age": "userAge",
    "user.contact.email": "emailAddress",
    "user.contact.phone": "phoneNumber"
}
renamed_data = JsonTransformer.rename_keys(flat_data, key_map)
print("重命名后数据:", renamed_data)

# 过滤数据
def exclude_phone(key, value):
    return key != "phone" and key != "phoneNumber"

filtered_data = JsonTransformer.filter(nested_data, exclude_phone)
print("过滤后数据:", filtered_data)

# 数组转换为字典
users_array = [
    {"id": "user_001", "name": "张三"},
    {"id": "user_002", "name": "李四"}
]
users_dict = JsonTransformer.array_to_dict(users_array, "id")
print("数组转字典:", users_dict)

# 分组数组
orders = [
    {"id": "order_001", "customerId": "customer_001", "amount": 100},
    {"id": "order_002", "customerId": "customer_002", "amount": 200},
    {"id": "order_003", "customerId": "customer_001", "amount": 150}
]
orders_by_customer = JsonTransformer.group_by(orders, "customerId")
print("分组后的订单:", orders_by_customer)
```

## JSON转换工具与库

### 1. JavaScript中的转换库

使用`jmespath`进行复杂的JSON转换：

```javascript
const jmespath = require('jmespath');

// 示例数据
const data = {
  "people": [
    {
      "name": "张三",
      "age": 30,
      "city": "北京",
      "skills": ["JavaScript", "Python", "React"],
      "projects": [
        {
          "name": "项目A",
          "role": "前端开发",
          "duration": 6
        },
        {
          "name": "项目B",
          "role": "技术负责人",
          "duration": 12
        }
      ]
    },
    {
      "name": "李四",
      "age": 28,
      "city": "上海",
      "skills": ["Python", "Django", "PostgreSQL"],
      "projects": [
        {
          "name": "项目C",
          "role": "后端开发",
          "duration": 8
        }
      ]
    }
  ]
};

// 提取所有人名和城市
const namesAndCities = jmespath.search(data, 'people[*].[name, city]');
console.log("姓名和城市:", namesAndCities);

// 提取掌握JavaScript技能的人
const jsDevs = jmespath.search(data, 'people[?contains(skills, `JavaScript`)]');
console.log("JavaScript开发者:", jsDevs);

// 计算每个人的项目总时长
const devsWithProjectDuration = jmespath.search(data, 'people[*].{name: name, totalProjectDuration: sum(projects[*].duration)}');
console.log("开发者和项目总时长:", devsWithProjectDuration);

// 创建技能列表
const allSkills = jmespath.search(data, 'people[*].skills[] | unique(@) | sort(@)');
console.log("所有技能:", allSkills);

// 按城市分组
const peopleByCity = jmespath.search(data, 'group_by(people, &city)');
console.log("按城市分组:", peopleByCity);
```

### 2. Python中的转换库

使用`jmespath`进行复杂的JSON转换：

```python
import jmespath

# 示例数据
data = {
    "people": [
        {
            "name": "张三",
            "age": 30,
            "city": "北京",
            "skills": ["JavaScript", "Python", "React"],
            "projects": [
                {
                    "name": "项目A",
                    "role": "前端开发",
                    "duration": 6
                },
                {
                    "name": "项目B",
                    "role": "技术负责人",
                    "duration": 12
                }
            ]
        },
        {
            "name": "李四",
            "age": 28,
            "city": "上海",
            "skills": ["Python", "Django", "PostgreSQL"],
            "projects": [
                {
                    "name": "项目C",
                    "role": "后端开发",
                    "duration": 8
                }
            ]
        }
    ]
}

# 提取所有人名和城市
names_and_cities = jmespath.search(data, 'people[*].[name, city]')
print("姓名和城市:", names_and_cities)

# 提取掌握Python技能的人
python_devs = jmespath.search(data, 'people[?contains(skills, `Python`)]')
print("Python开发者:", python_devs)

# 计算每个人的项目总时长
devs_with_project_duration = jmespath.search(data, 'people[*].{name: name, totalProjectDuration: sum(projects[*].duration)}')
print("开发者和项目总时长:", devs_with_project_duration)

# 创建技能列表
all_skills = jmespath.search(data, 'people[*].skills[] | unique(@) | sort(@)')
print("所有技能:", all_skills)

# 按城市分组
people_by_city = jmespath.search(data, 'group_by(people, &city)')
print("按城市分组:", people_by_city)
```

## 实际应用场景

### 1. API响应转换

转换不同API的响应格式以统一前端处理：

```javascript
// API1的响应格式
const api1Response = {
  "data": {
    "results": [
      {
        "user_id": "user_001",
        "full_name": "张三",
        "email_address": "zhangsan@example.com",
        "profile_pic": "https://example.com/avatar1.jpg"
      }
    ],
    "pagination": {
      "page": 1,
      "per_page": 10,
      "total": 25
    }
  },
  "status": "success"
};

// API2的响应格式
const api2Response = {
  "users": [
    {
      "id": "user_002",
      "name": "李四",
      "email": "lisi@example.com",
      "avatar": "https://example.com/avatar2.jpg"
    }
  ],
  "meta": {
    "currentPage": 1,
    "pageSize": 10,
    "totalRecords": 30
  }
};

// 标准化响应格式
function normalizeApiResponse(response) {
  // 判断响应类型
  const isApi1 = response.data && response.data.results;
  const isApi2 = response.users;
  
  if (isApi1) {
    return {
      users: response.data.results.map(user => ({
        id: user.user_id,
        name: user.full_name,
        email: user.email_address,
        avatar: user.profile_pic
      })),
      pagination: {
        page: response.data.pagination.page,
        pageSize: response.data.pagination.per_page,
        total: response.data.pagination.total
      }
    };
  } else if (isApi2) {
    return {
      users: response.users.map(user => ({
        id: user.id,
        name: user.name,
        email: user.email,
        avatar: user.avatar
      })),
      pagination: {
        page: response.meta.currentPage,
        pageSize: response.meta.pageSize,
        total: response.meta.totalRecords
      }
    };
  } else {
    throw new Error("未知的API响应格式");
  }
}

// 使用示例
const normalized1 = normalizeApiResponse(api1Response);
const normalized2 = normalizeApiResponse(api2Response);

console.log("API1标准化响应:", normalized1);
console.log("API2标准化响应:", normalized2);
```

### 2. 数据分析转换

将原始数据转换为适合分析的格式：

```python
import json
from datetime import datetime

# 原始销售数据
sales_data = {
    "records": [
        {
            "date": "2023-07-15",
            "product_id": "prod_001",
            "product_name": "智能手机",
            "category": "电子产品",
            "price": 5999,
            "quantity": 2,
            "customer_id": "cust_001",
            "customer_name": "张三",
            "sales_rep": "销售员A"
        },
        {
            "date": "2023-07-15",
            "product_id": "prod_002",
            "product_name": "笔记本电脑",
            "category": "电子产品",
            "price": 8999,
            "quantity": 1,
            "customer_id": "cust_002",
            "customer_name": "李四",
            "sales_rep": "销售员B"
        },
        {
            "date": "2023-07-16",
            "product_id": "prod_001",
            "product_name": "智能手机",
            "category": "电子产品",
            "price": 5999,
            "quantity": 1,
            "customer_id": "cust_003",
            "customer_name": "王五",
            "sales_rep": "销售员A"
        }
    ]
}

def transform_sales_data(data):
    """转换销售数据为分析格式"""
    records = data.get('records', [])
    
    # 计算每条记录的销售总额
    for record in records:
        record['total_amount'] = record['price'] * record['quantity']
        # 添加月份字段
        date_obj = datetime.strptime(record['date'], '%Y-%m-%d')
        record['month'] = date_obj.strftime('%Y-%m')
    
    # 按日期分组
    daily_sales = {}
    for record in records:
        date = record['date']
        if date not in daily_sales:
            daily_sales[date] = {
                'date': date,
                'sales_count': 0,
                'total_revenue': 0,
                'products': []
            }
        
        daily_sales[date]['sales_count'] += 1
        daily_sales[date]['total_revenue'] += record['total_amount']
        daily_sales[date]['products'].append({
            'name': record['product_name'],
            'quantity': record['quantity'],
            'amount': record['total_amount']
        })
    
    # 按产品分组
    product_sales = {}
    for record in records:
        product_id = record['product_id']
        if product_id not in product_sales:
            product_sales[product_id] = {
                'product_id': product_id,
                'product_name': record['product_name'],
                'category': record['category'],
                'total_quantity': 0,
                'total_revenue': 0,
                'sales_count': 0
            }
        
        product_sales[product_id]['total_quantity'] += record['quantity']
        product_sales[product_id]['total_revenue'] += record['total_amount']
        product_sales[product_id]['sales_count'] += 1
    
    # 按销售员分组
    rep_sales = {}
    for record in records:
        rep = record['sales_rep']
        if rep not in rep_sales:
            rep_sales[rep] = {
                'sales_rep': rep,
                'sales_count': 0,
                'total_revenue': 0,
                'products_sold': []
            }
        
        rep_sales[rep]['sales_count'] += 1
        rep_sales[rep]['total_revenue'] += record['total_amount']
        rep_sales[rep]['products_sold'].append({
            'product_id': record['product_id'],
            'product_name': record['product_name'],
            'quantity': record['quantity'],
            'amount': record['total_amount']
        })
    
    # 计算总体统计
    total_stats = {
        'total_sales': sum(daily_sales[date]['sales_count'] for date in daily_sales),
        'total_revenue': sum(daily_sales[date]['total_revenue'] for date in daily_sales),
        'total_customers': len(set(record['customer_id'] for record in records)),
        'total_products_sold': sum(record['quantity'] for record in records)
    }
    
    return {
        'daily_sales': list(daily_sales.values()),
        'product_sales': list(product_sales.values()),
        'rep_sales': list(rep_sales.values()),
        'summary': total_stats
    }

# 转换数据
transformed_data = transform_sales_data(sales_data)
print(json.dumps(transformed_data, indent=2, ensure_ascii=False))
```

## 实验环节：JSON转换实践

### 实验1：构建通用JSON转换器

构建一个支持多种转换操作的通用JSON转换器，包含：

1. 扁平化与嵌套化转换
2. 键重命名
3. 数据过滤
4. 数据分组
5. 数据聚合计算

### 实验2：API响应标准化

创建一个API响应标准化系统，支持：

1. 多种API响应格式的识别
2. 自动转换为标准格式
3. 自定义转换规则
4. 错误处理和日志记录

### 实验3：数据清洗管道

构建一个JSON数据清洗管道，实现：

1. 数据验证和修正
2. 异常值处理
3. 重复数据检测
4. 数据类型转换
5. 缺失值处理

## 小结

本节我们深入探讨了JSON转换与处理：

1. **JSON转换场景**：
   - 结构重组：改变JSON数据的结构
   - 数据过滤与清洗：移除不需要的字段，修正错误数据
   - 数据聚合与计算：对JSON数据进行聚合计算和统计

2. **JSON转换技术与工具**：
   - JavaScript中的JSON转换：扁平化、嵌套化、重命名、过滤等
   - Python中的JSON转换：相应的Python实现

3. **JSON转换工具与库**：
   - JavaScript中的转换库：jmespath
   - Python中的转换库：jmespath

4. **实际应用场景**：
   - API响应转换：统一不同API的响应格式
   - 数据分析转换：将原始数据转换为适合分析的格式

JSON转换与处理是现代数据处理的重要组成部分，它使我们能够在不同的数据格式和结构之间灵活转换，满足各种应用场景的需求。在下一节中，我们将探讨JSON安全与最佳实践，了解如何安全、高效地使用JSON。

## 代码示例

请查看`code/chapter5/transformation`目录，其中包含了：

1. `json_transformer.js` - JavaScript JSON转换器
2. `json_transformer.py` - Python JSON转换器
3. `api_normalizer.js` - API响应标准化示例
4. `sales_analysis.py` - 销售数据分析转换示例
5. `data_cleaning.js` - 数据清洗示例
6. `jmespath_examples.js` - JavaScript JMESPath示例
7. `jmespath_examples.py` - Python JMESPath示例
8. `transformation_pipeline.js` - 转换管道示例
9. `custom_transformer.js` - 自定义转换器示例
10. `performance_test.js` - 转换性能测试