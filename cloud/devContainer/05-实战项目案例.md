# ç¬¬5ç« ï¼šå®æˆ˜é¡¹ç›®æ¡ˆä¾‹

## 5.1 æ¡ˆä¾‹1ï¼šReact + Node.jså…¨æ ˆåº”ç”¨

### 5.1.1 é¡¹ç›®ç»“æ„

```
fullstack-app/
â”œâ”€â”€ .devcontainer/
â”‚   â”œâ”€â”€ devcontainer.json
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ frontend/           # Reactå‰ç«¯
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ public/
â”œâ”€â”€ backend/           # Node.jsåç«¯
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ models/
â””â”€â”€ README.md
```

### 5.1.2 DevContaineré…ç½®

**devcontainer.json:**
```json
{
    "name": "å…¨æ ˆåº”ç”¨å¼€å‘ç¯å¢ƒ",
    "dockerComposeFile": "docker-compose.yml",
    "service": "app",
    "workspaceFolder": "/workspace",
    "customizations": {
        "vscode": {
            "settings": {
                "editor.formatOnSave": true,
                "eslint.validate": ["javascript", "typescript"],
                "typescript.preferences.includePackageJsonAutoImports": "auto"
            },
            "extensions": [
                "ms-vscode.vscode-typescript-next",
                "bradlc.vscode-tailwindcss",
                "esbenp.prettier-vscode",
                "dbaeumer.vscode-eslint",
                "ms-azuretools.vscode-docker"
            ]
        }
    },
    "forwardPorts": [3000, 5000, 5432],
    "portsAttributes": {
        "3000": {
            "label": "å‰ç«¯åº”ç”¨",
            "onAutoForward": "notify"
        },
        "5000": {
            "label": "åç«¯API",
            "onAutoForward": "silent"
        }
    },
    "postCreateCommand": "bash .devcontainer/setup.sh"
}
```

**docker-compose.yml:**
```yaml
version: '3.8'
services:
  app:
    build:
      context: .
      dockerfile: .devcontainer/Dockerfile
    volumes:
      - .:/workspace
      - /var/run/docker.sock:/var/run/docker.sock
    command: sleep infinity
    depends_on:
      - postgres
      - redis

  postgres:
    image: postgres:14
    environment:
      POSTGRES_DB: fullstack_app
      POSTGRES_USER: dev
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

volumes:
  postgres_data:
```

**Dockerfile:**
```dockerfile
FROM mcr.microsoft.com/devcontainers/base:ubuntu

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    curl \
    git \
    build-essential

# å®‰è£…Node.js 18
RUN curl -fsSL https://deb.nodesource.com/setup_18.x | bash - && \
    apt-get install -y nodejs

# å®‰è£…å…¨å±€å·¥å…·
RUN npm install -g nodemon concurrently

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /workspace

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY frontend/package.json frontend/package-lock.json ./frontend/
COPY backend/package.json backend/package-lock.json ./backend/

# å®‰è£…ä¾èµ–
RUN cd frontend && npm install
RUN cd backend && npm install

# å¤åˆ¶æºä»£ç 
COPY . .

# è®¾ç½®é»˜è®¤ç”¨æˆ·
USER vscode
```

**setup.sh:**
```bash
#!/bin/bash
set -e

echo "ğŸš€ å¼€å§‹è®¾ç½®å…¨æ ˆåº”ç”¨å¼€å‘ç¯å¢ƒ..."

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
if [ ! -d "node_modules" ]; then
    echo "ğŸ“¦ å®‰è£…å‰ç«¯ä¾èµ–..."
    npm install
fi

# å®‰è£…åç«¯ä¾èµ–
cd ../backend
if [ ! -d "node_modules" ]; then
    echo "ğŸ“¦ å®‰è£…åç«¯ä¾èµ–..."
    npm install
fi

# ç­‰å¾…æ•°æ®åº“å¯åŠ¨
echo "â³ ç­‰å¾…æ•°æ®åº“æœåŠ¡å¯åŠ¨..."
until pg_isready -h postgres -p 5432 -U dev; do
    sleep 1
done

# åˆå§‹åŒ–æ•°æ®åº“
echo "ğŸ—„ï¸ åˆå§‹åŒ–æ•°æ®åº“..."
npm run db:migrate

# åˆ›å»ºæµ‹è¯•æ•°æ®
npm run db:seed

echo "âœ… å…¨æ ˆåº”ç”¨å¼€å‘ç¯å¢ƒè®¾ç½®å®Œæˆï¼"
echo ""
echo "ğŸ“ å¯åŠ¨å‘½ä»¤ï¼š"
echo "  å‰ç«¯å¼€å‘æœåŠ¡å™¨: cd frontend && npm start"
echo "  åç«¯å¼€å‘æœåŠ¡å™¨: cd backend && npm run dev"
echo "  åŒæ—¶å¯åŠ¨å‰åç«¯: npm run dev"
```

### 5.1.3 é¡¹ç›®é…ç½®æ–‡ä»¶

**package.json (æ ¹ç›®å½•):**
```json
{
  "name": "fullstack-app",
  "version": "1.0.0",
  "scripts": {
    "dev": "concurrently \"npm run dev:backend\" \"npm run dev:frontend\"",
    "dev:frontend": "cd frontend && npm start",
    "dev:backend": "cd backend && npm run dev",
    "build": "npm run build:frontend && npm run build:backend",
    "build:frontend": "cd frontend && npm run build",
    "build:backend": "cd backend && npm run build",
    "test": "npm run test:frontend && npm run test:backend"
  },
  "devDependencies": {
    "concurrently": "^7.6.0"
  }
}
```

## 5.2 æ¡ˆä¾‹2ï¼šPythonæ•°æ®ç§‘å­¦é¡¹ç›®

### 5.2.1 é¡¹ç›®ç»“æ„

```
data-science-project/
â”œâ”€â”€ .devcontainer/
â”‚   â”œâ”€â”€ devcontainer.json
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ notebooks/          # Jupyterç¬”è®°æœ¬
â”‚   â”œâ”€â”€ data_analysis.ipynb
â”‚   â””â”€â”€ machine_learning.ipynb
â”œâ”€â”€ src/               # Pythonæºä»£ç 
â”‚   â”œâ”€â”€ data_processing.py
â”‚   â”œâ”€â”€ model_training.py
â”‚   â””â”€â”€ utils.py
â”œâ”€â”€ data/              # æ•°æ®é›†
â”‚   â”œâ”€â”€ raw/
â”‚   â””â”€â”€ processed/
â””â”€â”€ README.md
```

### 5.2.2 DevContaineré…ç½®

**devcontainer.json:**
```json
{
    "name": "Pythonæ•°æ®ç§‘å­¦ç¯å¢ƒ",
    "image": "mcr.microsoft.com/devcontainers/python:3.11",
    "features": {
        "ghcr.io/devcontainers/features/git:1": {}
    },
    "customizations": {
        "vscode": {
            "settings": {
                "python.defaultInterpreterPath": "/usr/local/bin/python",
                "python.linting.enabled": true,
                "python.linting.pylintEnabled": true,
                "jupyter.notebookFileRoot": "/workspace"
            },
            "extensions": [
                "ms-python.python",
                "ms-python.vscode-pylance",
                "ms-toolsai.jupyter",
                "ms-toolsai.jupyter-keymap",
                "ms-toolsai.jupyter-renderers",
                "ms-python.black-formatter"
            ]
        }
    },
    "forwardPorts": [8888],
    "postCreateCommand": "pip install -r .devcontainer/requirements.txt && python -m ipykernel install --user --name=data-science"
}
```

**requirements.txt:**
```txt
# æ•°æ®å¤„ç†
pandas>=1.5.0
numpy>=1.21.0
scipy>=1.9.0

# æ•°æ®å¯è§†åŒ–
matplotlib>=3.5.0
seaborn>=0.12.0
plotly>=5.10.0

# æœºå™¨å­¦ä¹ 
scikit-learn>=1.0.0
tensorflow>=2.10.0
torch>=1.13.0

# å…¶ä»–å·¥å…·
jupyter>=1.0.0
jupyterlab>=3.5.0
ipykernel>=6.0.0

# å¼€å‘å·¥å…·
black>=22.0.0
flake8>=5.0.0
pytest>=7.0.0
```

### 5.2.3 ç¤ºä¾‹ç¬”è®°æœ¬

**notebooks/data_analysis.ipynb:**
```python
# æ•°æ®åˆ†æå’Œå¯è§†åŒ–ç¤ºä¾‹
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# åŠ è½½æ•°æ®
df = pd.read_csv('../data/raw/sample_data.csv')

# æ•°æ®æ¢ç´¢
print("æ•°æ®å½¢çŠ¶:", df.shape)
print("\næ•°æ®é¢„è§ˆ:")
print(df.head())

# å¯è§†åŒ–
plt.figure(figsize=(10, 6))
sns.histplot(df['value'], kde=True)
plt.title('æ•°æ®åˆ†å¸ƒ')
plt.show()
```

## 5.3 æ¡ˆä¾‹3ï¼šå¾®æœåŠ¡æ¶æ„é¡¹ç›®

### 5.3.1 é¡¹ç›®ç»“æ„

```
microservices-project/
â”œâ”€â”€ .devcontainer/
â”‚   â”œâ”€â”€ devcontainer.json
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ api-gateway/       # APIç½‘å…³
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/
â”œâ”€â”€ user-service/      # ç”¨æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/
â”œâ”€â”€ product-service/   # äº§å“æœåŠ¡
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/
â”œâ”€â”€ order-service/     # è®¢å•æœåŠ¡
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/
â””â”€â”€ README.md
```

### 5.3.2 DevContaineré…ç½®

**devcontainer.json:**
```json
{
    "name": "å¾®æœåŠ¡å¼€å‘ç¯å¢ƒ",
    "dockerComposeFile": "docker-compose.yml",
    "service": "dev",
    "workspaceFolder": "/workspace",
    "customizations": {
        "vscode": {
            "settings": {
                "editor.formatOnSave": true,
                "typescript.preferences.includePackageJsonAutoImports": "auto"
            },
            "extensions": [
                "ms-vscode.vscode-typescript-next",
                "esbenp.prettier-vscode",
                "ms-azuretools.vscode-docker",
                "ms-kubernetes-tools.vscode-kubernetes-tools"
            ]
        }
    },
    "forwardPorts": [3000, 3001, 3002, 3003, 5432, 6379, 9200],
    "postCreateCommand": "bash .devcontainer/setup-microservices.sh"
}
```

**docker-compose.yml:**
```yaml
version: '3.8'
services:
  dev:
    image: mcr.microsoft.com/devcontainers/base:ubuntu
    volumes:
      - .:/workspace
      - /var/run/docker.sock:/var/run/docker.sock
    command: sleep infinity
    depends_on:
      - postgres
      - redis
      - elasticsearch

  api-gateway:
    build:
      context: ./api-gateway
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=development
    depends_on:
      - user-service
      - product-service
      - order-service

  user-service:
    build:
      context: ./user-service
      dockerfile: Dockerfile
    ports:
      - "3001:3001"
    environment:
      - DB_HOST=postgres
      - REDIS_HOST=redis

  product-service:
    build:
      context: ./product-service
      dockerfile: Dockerfile
    ports:
      - "3002:3002"
    environment:
      - DB_HOST=postgres
      - ELASTICSEARCH_HOST=elasticsearch

  order-service:
    build:
      context: ./order-service
      dockerfile: Dockerfile
    ports:
      - "3003:3003"
    environment:
      - DB_HOST=postgres
      - REDIS_HOST=redis

  postgres:
    image: postgres:14
    environment:
      POSTGRES_DB: microservices
      POSTGRES_USER: dev
      POSTGRES_PASSWORD: password
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.5.0
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
    ports:
      - "9200:9200"
```

### 5.3.3 æœåŠ¡é…ç½®ç¤ºä¾‹

**user-service/package.json:**
```json
{
  "name": "user-service",
  "version": "1.0.0",
  "scripts": {
    "dev": "nodemon src/app.js",
    "start": "node src/app.js",
    "test": "jest",
    "migrate": "node src/database/migrate.js"
  },
  "dependencies": {
    "express": "^4.18.0",
    "mongoose": "^6.0.0",
    "redis": "^4.0.0",
    "jsonwebtoken": "^8.5.0"
  },
  "devDependencies": {
    "nodemon": "^2.0.0",
    "jest": "^29.0.0"
  }
}
```

## 5.4 æ¡ˆä¾‹4ï¼šè·¨å¹³å°ç§»åŠ¨åº”ç”¨

### 5.4.1 é¡¹ç›®ç»“æ„

```
mobile-app/
â”œâ”€â”€ .devcontainer/
â”‚   â”œâ”€â”€ devcontainer.json
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ app/               # React Nativeåº”ç”¨
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ ios/
â”œâ”€â”€ backend/           # åç«¯API
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ src/
â””â”€â”€ README.md
```

### 5.4.2 DevContaineré…ç½®

**devcontainer.json:**
```json
{
    "name": "React Nativeå¼€å‘ç¯å¢ƒ",
    "build": {
        "dockerfile": "Dockerfile",
        "context": "."
    },
    "customizations": {
        "vscode": {
            "settings": {
                "react-native.packager.port": 8081,
                "typescript.preferences.includePackageJsonAutoImports": "auto"
            },
            "extensions": [
                "ms-vscode.vscode-typescript-next",
                "msjsdiag.vscode-react-native",
                "bradlc.vscode-tailwindcss",
                "esbenp.prettier-vscode"
            ]
        }
    },
    "forwardPorts": [3000, 8081, 19000, 19001, 19002],
    "portsAttributes": {
        "8081": {
            "label": "React Native Metro Bundler",
            "onAutoForward": "notify"
        },
        "19000": {
            "label": "Expo DevTools",
            "onAutoForward": "silent"
        }
    },
    "postCreateCommand": "cd app && npm install && cd ../backend && npm install"
}
```

**Dockerfile:**
```dockerfile
FROM mcr.microsoft.com/devcontainers/base:ubuntu

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y \
    curl \
    git \
    build-essential \
    default-jre \
    default-jdk

# å®‰è£…Node.js
RUN curl -fsSL https://deb.nodesource.com/setup_18.x | bash - && \
    apt-get install -y nodejs

# å®‰è£…React Nativeå·¥å…·
RUN npm install -g expo-cli react-native-cli

# å®‰è£…Android SDKï¼ˆç®€åŒ–ç‰ˆï¼‰
RUN mkdir -p /opt/android-sdk && \
    cd /opt/android-sdk && \
    wget https://dl.google.com/android/repository/commandlinetools-linux-8512546_latest.zip && \
    unzip commandlinetools-linux-8512546_latest.zip && \
    rm commandlinetools-linux-8512546_latest.zip

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV ANDROID_HOME=/opt/android-sdk
ENV PATH=$PATH:$ANDROID_HOME/tools/bin:$ANDROID_HOME/platform-tools

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /workspace

USER vscode
```

## 5.5 æœ€ä½³å®è·µæ€»ç»“

### 5.5.1 é¡¹ç›®ç»“æ„æ ‡å‡†åŒ–

- **æ¸…æ™°çš„åˆ†å±‚**ï¼šæŒ‰ç…§åŠŸèƒ½æ¨¡å—ç»„ç»‡ä»£ç 
- **ç¯å¢ƒéš”ç¦»**ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒåˆ†ç¦»
- **é…ç½®ç®¡ç†**ï¼šç»Ÿä¸€çš„ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶

### 5.5.2 å¼€å‘æµç¨‹ä¼˜åŒ–

- **å¿«é€Ÿå¯åŠ¨**ï¼šæ–°æˆå‘˜å‡ åˆ†é’Ÿå†…è·å¾—å®Œæ•´å¼€å‘ç¯å¢ƒ
- **ä¸€è‡´æ€§**ï¼šæ‰€æœ‰å¼€å‘è€…ä½¿ç”¨ç›¸åŒçš„å·¥å…·å’Œé…ç½®
- **è‡ªåŠ¨åŒ–**ï¼šè‡ªåŠ¨å®‰è£…ä¾èµ–ã€é…ç½®ç¯å¢ƒ

### 5.5.3 å›¢é˜Ÿåä½œ

- **æ–‡æ¡£å®Œå–„**ï¼šè¯¦ç»†çš„READMEå’Œå¼€å‘æŒ‡å—
- **ä»£ç è§„èŒƒ**ï¼šç»Ÿä¸€çš„ä»£ç é£æ ¼å’Œæäº¤è§„èŒƒ
- **CI/CDé›†æˆ**ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹

## 5.6 æ•…éšœæ’é™¤æŒ‡å—

### 5.6.1 å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**ï¼šæ£€æŸ¥ç«¯å£å ç”¨ï¼Œä¿®æ”¹é…ç½®
2. **æƒé™é—®é¢˜**ï¼šç¡®ä¿æ–‡ä»¶æƒé™æ­£ç¡®
3. **ç½‘ç»œé—®é¢˜**ï¼šæ£€æŸ¥Dockerç½‘ç»œé…ç½®
4. **æ„å»ºå¤±è´¥**ï¼šæŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—

### 5.6.2 è°ƒè¯•æŠ€å·§

- ä½¿ç”¨ `docker logs` æŸ¥çœ‹å®¹å™¨æ—¥å¿—
- åœ¨VSCodeä¸­æ‰“å¼€ç»ˆç«¯è¿›è¡Œè°ƒè¯•
- ä½¿ç”¨ `docker exec` è¿›å…¥å®¹å™¨å†…éƒ¨

## 5.7 æœ¬ç« æ€»ç»“

æœ¬ç« é€šè¿‡å››ä¸ªå®æˆ˜æ¡ˆä¾‹å±•ç¤ºäº†DevContaineråœ¨ä¸åŒåœºæ™¯ä¸‹çš„åº”ç”¨ï¼š

1. **å…¨æ ˆåº”ç”¨**ï¼šReact + Node.js + æ•°æ®åº“
2. **æ•°æ®ç§‘å­¦**ï¼šPython + Jupyter + æœºå™¨å­¦ä¹ 
3. **å¾®æœåŠ¡æ¶æ„**ï¼šå¤šæœåŠ¡ + æ¶ˆæ¯é˜Ÿåˆ— + æœç´¢
4. **ç§»åŠ¨åº”ç”¨**ï¼šReact Native + è·¨å¹³å°å¼€å‘

æ¯ä¸ªæ¡ˆä¾‹éƒ½æä¾›äº†å®Œæ•´çš„é…ç½®å’Œä»£ç ç¤ºä¾‹ï¼Œä½ å¯ä»¥ç›´æ¥åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­ã€‚

---

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**ï¼š
1. é€‰æ‹©ä¸€ä¸ªæ¡ˆä¾‹è¿›è¡Œå®è·µ
2. æ ¹æ®ä½ çš„é¡¹ç›®éœ€æ±‚è°ƒæ•´é…ç½®
3. åˆ›å»ºä½ è‡ªå·±çš„DevContaineré¡¹ç›®
4. ä¸å›¢é˜Ÿæˆå‘˜åˆ†äº«ä½ çš„é…ç½®

**æ­å–œä½ å®Œæˆäº†DevContainerä»å…¥é—¨åˆ°ä¸“å®¶çš„å­¦ä¹ ä¹‹æ—…ï¼** ğŸ‰

é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ å·²ç»æŒæ¡äº†DevContainerçš„æ ¸å¿ƒæ¦‚å¿µã€é…ç½®æŠ€å·§å’Œæœ€ä½³å®è·µã€‚ç°åœ¨ä½ å¯ä»¥è‡ªä¿¡åœ°åœ¨ä»»ä½•é¡¹ç›®ä¸­åº”ç”¨è¿™äº›çŸ¥è¯†ï¼Œæ„å»ºé«˜æ•ˆã€ä¸€è‡´çš„å¼€å‘ç¯å¢ƒã€‚