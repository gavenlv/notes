# ç¬¬1ç« ï¼šDockerç®€ä»‹ä¸å®‰è£…

## ğŸ“š æœ¬ç« ç›®æ ‡

- ç†è§£ä»€ä¹ˆæ˜¯Dockerä»¥åŠä¸ºä»€ä¹ˆéœ€è¦å®ƒ
- æŒæ¡å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«
- äº†è§£Dockerçš„æ ¸å¿ƒç»„ä»¶å’Œæ¶æ„
- åœ¨Windows/Linux/Macä¸ŠæˆåŠŸå®‰è£…Docker
- éªŒè¯Dockerå®‰è£…å¹¶è¿è¡Œç¬¬ä¸€ä¸ªå®¹å™¨

## 1.1 Dockeræ˜¯ä»€ä¹ˆï¼Ÿ

### 1.1.1 Dockerçš„å®šä¹‰

Dockeræ˜¯ä¸€ä¸ª**å¼€æºçš„å®¹å™¨åŒ–å¹³å°**ï¼Œå®ƒå¯ä»¥è®©å¼€å‘è€…å°†åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹æ‰“åŒ…åˆ°ä¸€ä¸ª**æ ‡å‡†åŒ–çš„å•å…ƒ**ä¸­ï¼Œè¿™ä¸ªå•å…ƒè¢«ç§°ä¸º**å®¹å™¨ï¼ˆContainerï¼‰**ã€‚

**ç®€å•ç†è§£**ï¼š
- æƒ³è±¡ä½ è¦æ¬å®¶ï¼ŒDockerå°±åƒæ˜¯ä¸€ä¸ª**æ ‡å‡†åŒ–çš„é›†è£…ç®±**
- ä½ æŠŠæ‰€æœ‰ç‰©å“ï¼ˆåº”ç”¨ç¨‹åº+ä¾èµ–ï¼‰æ‰“åŒ…è¿›é›†è£…ç®±
- æ— è®ºè¿åˆ°å“ªé‡Œï¼ˆå¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒï¼‰ï¼Œéƒ½èƒ½æ­£å¸¸ä½¿ç”¨
- ä¸ç”¨æ‹…å¿ƒ"åœ¨æˆ‘ç”µè„‘ä¸Šèƒ½è¿è¡Œ"çš„é—®é¢˜

### 1.1.2 ä¸ºä»€ä¹ˆéœ€è¦Dockerï¼Ÿ

#### é—®é¢˜åœºæ™¯

**ä¼ ç»Ÿå¼€å‘éƒ¨ç½²çš„ç—›ç‚¹**ï¼š

```
å¼€å‘ç¯å¢ƒï¼š
â”œâ”€â”€ Python 3.8
â”œâ”€â”€ MySQL 5.7
â”œâ”€â”€ Redis 4.0
â””â”€â”€ æŸäº›ç³»ç»Ÿåº“

æµ‹è¯•ç¯å¢ƒï¼š
â”œâ”€â”€ Python 3.9  â† ç‰ˆæœ¬ä¸ä¸€è‡´ï¼
â”œâ”€â”€ MySQL 8.0   â† ç‰ˆæœ¬ä¸åŒï¼
â”œâ”€â”€ Redis 5.0
â””â”€â”€ ç¼ºå°‘æŸäº›åº“  â† ç¯å¢ƒä¸å®Œæ•´ï¼

ç»“æœï¼šâŒ "åœ¨æˆ‘æœºå™¨ä¸Šæ˜¯å¥½çš„å•Šï¼"
```

#### Dockerçš„è§£å†³æ–¹æ¡ˆ

```
Dockerå®¹å™¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨ç¨‹åº + æ‰€æœ‰ä¾èµ–         â”‚
â”‚ â”œâ”€â”€ Python 3.8              â”‚
â”‚ â”œâ”€â”€ MySQL 5.7               â”‚
â”‚ â”œâ”€â”€ Redis 4.0               â”‚
â”‚ â””â”€â”€ æ‰€æœ‰ç³»ç»Ÿåº“              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ å¯ä»¥è¿è¡Œåœ¨ä»»ä½•åœ°æ–¹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¼€å‘ / æµ‹è¯• / ç”Ÿäº§ç¯å¢ƒ      â”‚
â”‚ âœ… ç¯å¢ƒå®Œå…¨ä¸€è‡´             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.1.3 Dockerçš„æ ¸å¿ƒä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ | ä¼ ç»Ÿæ–¹å¼ | Dockeræ–¹å¼ |
|------|------|----------|------------|
| **ç¯å¢ƒä¸€è‡´æ€§** | å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´ | âŒ ç»å¸¸ä¸ä¸€è‡´ | âœ… å®Œå…¨ä¸€è‡´ |
| **å¿«é€Ÿéƒ¨ç½²** | ç§’çº§å¯åŠ¨åº”ç”¨ | âŒ åˆ†é’Ÿçº§ | âœ… ç§’çº§ |
| **èµ„æºéš”ç¦»** | åº”ç”¨é—´äº’ä¸å½±å“ | âŒ éœ€è¦è™šæ‹Ÿæœº | âœ… è½»é‡çº§éš”ç¦» |
| **ç‰ˆæœ¬ç®¡ç†** | åƒGitä¸€æ ·ç®¡ç†ç¯å¢ƒ | âŒ éš¾ä»¥ç‰ˆæœ¬åŒ– | âœ… é•œåƒç‰ˆæœ¬æ§åˆ¶ |
| **å¯ç§»æ¤æ€§** | ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œ | âŒ ä¾èµ–ç¯å¢ƒ | âœ… è·¨å¹³å°è¿è¡Œ |

## 1.2 å®¹å™¨ vs è™šæ‹Ÿæœº

### 1.2.1 è™šæ‹Ÿæœºæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         åº”ç”¨A      åº”ç”¨B      åº”ç”¨C      â”‚
â”‚         â†“          â†“          â†“          â”‚
â”‚      Guest OS  Guest OS  Guest OS       â”‚ â† æ¯ä¸ªéƒ½æ˜¯å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼ˆGBçº§åˆ«ï¼‰
â”‚         â†“          â†“          â†“          â”‚
â”‚           Hypervisor (è™šæ‹ŸåŒ–å±‚)          â”‚
â”‚                   â†“                      â”‚
â”‚            Host OS (å®¿ä¸»æ“ä½œç³»ç»Ÿ)        â”‚
â”‚                   â†“                      â”‚
â”‚         ç¡¬ä»¶ (CPU, å†…å­˜, ç£ç›˜)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹ï¼š
âœ… å®Œå…¨éš”ç¦»
âŒ å¯åŠ¨æ…¢ï¼ˆåˆ†é’Ÿçº§ï¼‰
âŒ å ç”¨èµ„æºå¤šï¼ˆæ¯ä¸ªè™šæ‹Ÿæœºå‡ GBï¼‰
âŒ æ€§èƒ½æŸè€—å¤§
```

### 1.2.2 Dockerå®¹å™¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    å®¹å™¨A    å®¹å™¨B    å®¹å™¨C    å®¹å™¨D       â”‚
â”‚     â†“        â†“        â†“        â†“         â”‚
â”‚          Docker Engine                   â”‚ â† Dockerå¼•æ“
â”‚                   â†“                      â”‚
â”‚            Host OS (å®¿ä¸»æ“ä½œç³»ç»Ÿ)        â”‚ â† å…±äº«æ“ä½œç³»ç»Ÿå†…æ ¸
â”‚                   â†“                      â”‚
â”‚         ç¡¬ä»¶ (CPU, å†…å­˜, ç£ç›˜)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç‰¹ç‚¹ï¼š
âœ… è½»é‡çº§ï¼ˆMBçº§åˆ«ï¼‰
âœ… å¯åŠ¨å¿«ï¼ˆç§’çº§ï¼‰
âœ… èµ„æºå ç”¨å°‘
âœ… æ€§èƒ½æ¥è¿‘åŸç”Ÿ
âš ï¸  éš”ç¦»æ€§ç•¥ä½äºè™šæ‹Ÿæœº
```

### 1.2.3 å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§ | è™šæ‹Ÿæœº | Dockerå®¹å™¨ |
|------|--------|------------|
| **å¯åŠ¨é€Ÿåº¦** | åˆ†é’Ÿçº§ | ç§’çº§ |
| **ç¡¬ç›˜å ç”¨** | GBçº§ | MBçº§ |
| **æ€§èƒ½** | è¾ƒæ…¢ | æ¥è¿‘åŸç”Ÿ |
| **ç³»ç»Ÿæ”¯æŒé‡** | å‡ åä¸ª | æˆç™¾ä¸Šåƒä¸ª |
| **éš”ç¦»æ€§** | å®Œå…¨éš”ç¦» | è¿›ç¨‹çº§éš”ç¦» |
| **æ“ä½œç³»ç»Ÿ** | æ¯ä¸ªVMç‹¬ç«‹OS | å…±äº«å®¿ä¸»OSå†…æ ¸ |

**ä»€ä¹ˆæ—¶å€™ç”¨è™šæ‹Ÿæœºï¼Ÿ**
- éœ€è¦è¿è¡Œä¸åŒæ“ä½œç³»ç»Ÿï¼ˆLinuxå’ŒWindowsï¼‰
- éœ€è¦å®Œå…¨éš”ç¦»çš„å®‰å…¨ç¯å¢ƒ

**ä»€ä¹ˆæ—¶å€™ç”¨Dockerï¼Ÿ**
- å¾®æœåŠ¡æ¶æ„
- æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²(CI/CD)
- å¿«é€Ÿæ‰©å±•åº”ç”¨
- å¼€å‘æµ‹è¯•ç¯å¢ƒ

## 1.3 Dockeræ ¸å¿ƒæ¦‚å¿µ

### 1.3.1 ä¸‰å¤§æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          â”‚
â”‚  1. é•œåƒ (Image) - åªè¯»æ¨¡æ¿             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ åº”ç”¨ç¨‹åºä»£ç                â”‚          â”‚
â”‚  â”‚ + è¿è¡Œæ—¶ç¯å¢ƒ               â”‚          â”‚
â”‚  â”‚ + ç³»ç»Ÿå·¥å…·                 â”‚          â”‚
â”‚  â”‚ + ç³»ç»Ÿåº“å’Œè®¾ç½®             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â†“ docker run                     â”‚
â”‚  2. å®¹å™¨ (Container) - è¿è¡Œå®ä¾‹          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ æ­£åœ¨è¿è¡Œçš„åº”ç”¨             â”‚          â”‚
â”‚  â”‚ (å¯è¯»å†™å±‚)                 â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â†“ docker push                    â”‚
â”‚  3. ä»“åº“ (Repository) - é•œåƒå­˜å‚¨         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Docker Hub / ç§æœ‰ä»“åº“      â”‚          â”‚
â”‚  â”‚ (å­˜å‚¨å’Œåˆ†å‘é•œåƒ)           â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1. é•œåƒ (Image)

**å®šä¹‰**ï¼šé•œåƒæ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ï¼ŒåŒ…å«äº†è¿è¡Œåº”ç”¨æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ã€‚

**ç±»æ¯”ç†è§£**ï¼š
- é•œåƒå°±åƒæ˜¯ä¸€ä¸ª**ç±»ï¼ˆClassï¼‰**
- æˆ–è€…åƒæ˜¯ä¸€ä¸ª**å®‰è£…åŒ…**
- æˆ–è€…åƒæ˜¯**è™šæ‹Ÿæœºçš„å¿«ç…§**

**ç¤ºä¾‹**ï¼š
```bash
# ä¸€ä¸ªPython Webåº”ç”¨çš„é•œåƒåŒ…å«ï¼š
â”œâ”€â”€ Ubuntu 20.04 åŸºç¡€ç³»ç»Ÿ
â”œâ”€â”€ Python 3.9
â”œâ”€â”€ Flaskæ¡†æ¶
â”œâ”€â”€ åº”ç”¨ä»£ç 
â””â”€â”€ å¯åŠ¨è„šæœ¬
```

#### 2. å®¹å™¨ (Container)

**å®šä¹‰**ï¼šå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†çš„è½¯ä»¶å•å…ƒã€‚

**ç±»æ¯”ç†è§£**ï¼š
- å®¹å™¨æ˜¯é•œåƒçš„**å®ä¾‹ï¼ˆInstanceï¼‰**
- ä¸€ä¸ªé•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨
- å°±åƒä¸€ä¸ªClasså¯ä»¥åˆ›å»ºå¤šä¸ªObject

**ç‰¹ç‚¹**ï¼š
- âœ… å¯ä»¥å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤
- âœ… å¯ä»¥è¯»å†™æ•°æ®
- âœ… ç›¸äº’éš”ç¦»
- âœ… è½»é‡çº§

#### 3. ä»“åº“ (Repository)

**å®šä¹‰**ï¼šä»“åº“æ˜¯é›†ä¸­å­˜å‚¨å’Œåˆ†å‘é•œåƒçš„åœ°æ–¹ã€‚

**ç±»æ¯”ç†è§£**ï¼š
- å°±åƒGitHubæ˜¯å­˜å‚¨ä»£ç çš„åœ°æ–¹
- Docker Hubæ˜¯å­˜å‚¨é•œåƒçš„åœ°æ–¹

**ç±»å‹**ï¼š
- **å…¬å…±ä»“åº“**ï¼šDocker Hubï¼ˆhub.docker.comï¼‰
- **ç§æœ‰ä»“åº“**ï¼šä¼ä¸šå†…éƒ¨æ­å»ºçš„ä»“åº“

### 1.3.2 Dockeræ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Docker å®¢æˆ·ç«¯ (CLI)                â”‚
â”‚         $ docker run, docker build...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ REST API
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Docker å®ˆæŠ¤è¿›ç¨‹ (Daemon)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å®¹å™¨ç®¡ç† â”‚ é•œåƒç®¡ç† â”‚ ç½‘ç»œ â”‚ å­˜å‚¨       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“         â†“         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
    â”‚å®¹å™¨1 â”‚  â”‚å®¹å™¨2 â”‚  â”‚å®¹å™¨3 â”‚
    â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
```

**ç»„ä»¶è¯´æ˜**ï¼š

1. **Docker Clientï¼ˆå®¢æˆ·ç«¯ï¼‰**
   - ç”¨æˆ·é€šè¿‡å‘½ä»¤è¡Œä¸Dockeräº¤äº’
   - å‘é€å‘½ä»¤ç»™Dockerå®ˆæŠ¤è¿›ç¨‹

2. **Docker Daemonï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰**
   - è¿è¡Œåœ¨å®¿ä¸»æœºä¸Š
   - è´Ÿè´£æ„å»ºã€è¿è¡Œå’Œåˆ†å‘å®¹å™¨
   - ç›‘å¬Docker APIè¯·æ±‚

3. **Docker Registryï¼ˆä»“åº“ï¼‰**
   - å­˜å‚¨Dockeré•œåƒ
   - å…¬å…±ï¼šDocker Hub
   - ç§æœ‰ï¼šHarborã€GitLab Registry

## 1.4 Dockerå®‰è£…

### 1.4.1 ç³»ç»Ÿè¦æ±‚

| æ“ä½œç³»ç»Ÿ | æœ€ä½è¦æ±‚ |
|----------|----------|
| **Windows** | Windows 10/11 Pro, Enterprise, or Education (64-bit)<br>éœ€è¦å¯ç”¨Hyper-Vå’ŒWSL 2 |
| **Linux** | 64ä½æ“ä½œç³»ç»Ÿï¼Œå†…æ ¸ç‰ˆæœ¬3.10+ |
| **macOS** | macOS 10.14+ |

### 1.4.2 Windowså®‰è£…æ­¥éª¤

#### æ­¥éª¤1ï¼šå¯ç”¨WSL 2

```powershell
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒPowerShell

# 1. å¯ç”¨WSL
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart

# 2. å¯ç”¨è™šæ‹ŸæœºåŠŸèƒ½
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart

# 3. é‡å¯ç”µè„‘
shutdown /r /t 0

# 4. è®¾ç½®WSL 2ä¸ºé»˜è®¤ç‰ˆæœ¬
wsl --set-default-version 2
```

#### æ­¥éª¤2ï¼šä¸‹è½½å¹¶å®‰è£…Docker Desktop

1. è®¿é—® [Docker Desktopå®˜ç½‘](https://www.docker.com/products/docker-desktop)
2. ä¸‹è½½Windowsç‰ˆæœ¬
3. åŒå‡»å®‰è£…åŒ…ï¼ŒæŒ‰æç¤ºå®‰è£…
4. å®‰è£…å®Œæˆåé‡å¯ç”µè„‘

#### æ­¥éª¤3ï¼šå¯åŠ¨Docker Desktop

1. å¯åŠ¨Docker Desktop
2. ç­‰å¾…Dockerå¼•æ“å¯åŠ¨ï¼ˆæ‰˜ç›˜å›¾æ ‡æ˜¾ç¤ºä¸ºç»¿è‰²ï¼‰
3. æ¥å—è®¸å¯åè®®

### 1.4.3 Linux (Ubuntu) å®‰è£…æ­¥éª¤

```bash
# 1. æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•
sudo apt-get update

# 2. å®‰è£…å¿…è¦çš„ä¾èµ–
sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release

# 3. æ·»åŠ Dockerå®˜æ–¹GPGå¯†é’¥
sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# 4. è®¾ç½®ç¨³å®šç‰ˆä»“åº“
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# 5. å®‰è£…Docker Engine
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin

# 6. éªŒè¯å®‰è£…
sudo docker run hello-world

# 7. æ·»åŠ å½“å‰ç”¨æˆ·åˆ°dockerç»„ï¼ˆé¿å…æ¯æ¬¡ä½¿ç”¨sudoï¼‰
sudo usermod -aG docker $USER
newgrp docker
```

### 1.4.4 macOSå®‰è£…æ­¥éª¤

1. è®¿é—® [Docker Desktopå®˜ç½‘](https://www.docker.com/products/docker-desktop)
2. ä¸‹è½½macOSç‰ˆæœ¬ï¼ˆIntelèŠ¯ç‰‡æˆ–AppleèŠ¯ç‰‡ï¼‰
3. æ‹–åŠ¨Docker.appåˆ°Applicationsæ–‡ä»¶å¤¹
4. å¯åŠ¨Docker Desktop
5. ç­‰å¾…Dockerå¼•æ“å¯åŠ¨

## 1.5 éªŒè¯å®‰è£…

### 1.5.1 æ£€æŸ¥Dockerç‰ˆæœ¬

```bash
# æŸ¥çœ‹Dockerç‰ˆæœ¬
docker --version
# è¾“å‡ºç¤ºä¾‹ï¼šDocker version 24.0.7, build afdd53b

# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
docker version
```

**é¢„æœŸè¾“å‡º**ï¼š
```
Client: Docker Engine - Community
 Version:           24.0.7
 API version:       1.43
 Go version:        go1.20.10
 Git commit:        afdd53b
 Built:             Thu Oct 26 09:08:44 2023
 OS/Arch:           windows/amd64
 Context:           default

Server: Docker Desktop
 Engine:
  Version:          24.0.7
  API version:      1.43 (minimum version 1.12)
  Go version:       go1.20.10
  Git commit:       311b9ff
  Built:            Thu Oct 26 09:08:02 2023
  OS/Arch:          linux/amd64
```

### 1.5.2 æ£€æŸ¥Dockerä¿¡æ¯

```bash
# æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯
docker info
```

**å…³é”®ä¿¡æ¯**ï¼š
- Containers: å®¹å™¨æ•°é‡
- Images: é•œåƒæ•°é‡
- Server Version: æœåŠ¡å™¨ç‰ˆæœ¬
- Storage Driver: å­˜å‚¨é©±åŠ¨
- Operating System: æ“ä½œç³»ç»Ÿ

### 1.5.3 è¿è¡Œç¬¬ä¸€ä¸ªå®¹å™¨

```bash
# è¿è¡Œhello-worldå®¹å™¨
docker run hello-world
```

**æ‰§è¡Œè¿‡ç¨‹è§£æ**ï¼š

```
1. Dockerå®¢æˆ·ç«¯è”ç³»Dockerå®ˆæŠ¤è¿›ç¨‹
   â”‚
   â†“
2. Dockerå®ˆæŠ¤è¿›ç¨‹ä»Docker Hubæ‹‰å–"hello-world"é•œåƒ
   â”‚
   â†“
3. Dockerå®ˆæŠ¤è¿›ç¨‹ä»é•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨
   â”‚
   â†“
4. å®¹å™¨è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œäº§ç”Ÿè¾“å‡º
   â”‚
   â†“
5. Dockerå®ˆæŠ¤è¿›ç¨‹å°†è¾“å‡ºæµå¼ä¼ è¾“åˆ°Dockerå®¢æˆ·ç«¯
   â”‚
   â†“
6. æ˜¾ç¤ºåœ¨ç»ˆç«¯
```

**é¢„æœŸè¾“å‡º**ï¼š
```
Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.
```

## 1.6 Dockerå¸¸ç”¨å‘½ä»¤é¢„è§ˆ

### 1.6.1 é•œåƒç›¸å…³å‘½ä»¤

```bash
# æœç´¢é•œåƒ
docker search nginx

# æ‹‰å–é•œåƒ
docker pull nginx

# æŸ¥çœ‹æœ¬åœ°é•œåƒ
docker images

# åˆ é™¤é•œåƒ
docker rmi nginx
```

### 1.6.2 å®¹å™¨ç›¸å…³å‘½ä»¤

```bash
# è¿è¡Œå®¹å™¨
docker run -d -p 80:80 nginx

# æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker ps

# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰
docker ps -a

# åœæ­¢å®¹å™¨
docker stop <container_id>

# å¯åŠ¨å®¹å™¨
docker start <container_id>

# åˆ é™¤å®¹å™¨
docker rm <container_id>

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs <container_id>

# è¿›å…¥å®¹å™¨
docker exec -it <container_id> /bin/bash
```

### 1.6.3 ç³»ç»Ÿç›¸å…³å‘½ä»¤

```bash
# æŸ¥çœ‹Dockerä¿¡æ¯
docker info

# æŸ¥çœ‹Dockerç‰ˆæœ¬
docker version

# æ¸…ç†æœªä½¿ç”¨çš„èµ„æº
docker system prune
```

## 1.7 å®æˆ˜ç»ƒä¹ 

### ç»ƒä¹ 1ï¼šè¿è¡ŒNginx WebæœåŠ¡å™¨

**ç›®æ ‡**ï¼šå¯åŠ¨ä¸€ä¸ªNginxå®¹å™¨ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­è®¿é—®

```bash
# 1. æ‹‰å–nginxé•œåƒ
docker pull nginx

# 2. è¿è¡Œnginxå®¹å™¨
docker run -d -p 8080:80 --name my-nginx nginx

# å‚æ•°è¯´æ˜ï¼š
# -d: åå°è¿è¡Œ
# -p 8080:80: å°†å®¹å™¨çš„80ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„8080ç«¯å£
# --name my-nginx: ç»™å®¹å™¨å‘½åä¸ºmy-nginx
# nginx: ä½¿ç”¨çš„é•œåƒåç§°

# 3. éªŒè¯å®¹å™¨è¿è¡Œ
docker ps

# 4. åœ¨æµè§ˆå™¨è®¿é—®
# http://localhost:8080
# åº”è¯¥çœ‹åˆ°Nginxæ¬¢è¿é¡µé¢

# 5. æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs my-nginx

# 6. åœæ­¢å®¹å™¨
docker stop my-nginx

# 7. åˆ é™¤å®¹å™¨
docker rm my-nginx
```

### ç»ƒä¹ 2ï¼šäº¤äº’å¼è¿è¡ŒUbuntuå®¹å™¨

**ç›®æ ‡**ï¼šè¿›å…¥Ubuntuå®¹å™¨å†…éƒ¨è¿›è¡Œæ“ä½œ

```bash
# 1. è¿è¡ŒUbuntuå®¹å™¨å¹¶è¿›å…¥bash
docker run -it ubuntu bash

# å‚æ•°è¯´æ˜ï¼š
# -i: äº¤äº’æ¨¡å¼
# -t: åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯
# ubuntu: é•œåƒå
# bash: è¿è¡Œçš„å‘½ä»¤

# 2. åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤
cat /etc/os-release    # æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯
apt-get update         # æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
apt-get install curl   # å®‰è£…curl
curl --version         # éªŒè¯å®‰è£…

# 3. é€€å‡ºå®¹å™¨
exit

# æ³¨æ„ï¼šé€€å‡ºåå®¹å™¨ä¼šåœæ­¢
```

### ç»ƒä¹ 3ï¼šæŸ¥çœ‹å’Œæ¸…ç†èµ„æº

```bash
# 1. æŸ¥çœ‹æ‰€æœ‰é•œåƒ
docker images

# 2. æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰
docker ps -a

# 3. åˆ é™¤åœæ­¢çš„å®¹å™¨
docker container prune

# 4. åˆ é™¤æœªä½¿ç”¨çš„é•œåƒ
docker image prune

# 5. æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æº
docker system prune -a
```

## 1.8 å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šDocker Desktopæ— æ³•å¯åŠ¨

**Windowsç³»ç»Ÿ**ï¼š
```powershell
# æ£€æŸ¥WSL 2æ˜¯å¦å¯ç”¨
wsl --list --verbose

# æ£€æŸ¥Hyper-Væ˜¯å¦å¯ç”¨
Get-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V

# é‡æ–°å®‰è£…WSL 2å†…æ ¸æ›´æ–°åŒ…
# ä¸‹è½½åœ°å€ï¼šhttps://aka.ms/wsl2kernel
```

### é—®é¢˜2ï¼šæ‹‰å–é•œåƒé€Ÿåº¦æ…¢

**é…ç½®å›½å†…é•œåƒåŠ é€Ÿå™¨**ï¼š

**Windows/Mac (Docker Desktop)**ï¼š
1. æ‰“å¼€Docker Desktop
2. Settings â†’ Docker Engine
3. æ·»åŠ é•œåƒåŠ é€Ÿå™¨é…ç½®ï¼š

```json
{
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com",
    "https://mirror.ccs.tencentyun.com"
  ]
}
```

**Linux**ï¼š
```bash
# ç¼–è¾‘daemon.json
sudo nano /etc/docker/daemon.json

# æ·»åŠ å†…å®¹
{
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com"
  ]
}

# é‡å¯Docker
sudo systemctl daemon-reload
sudo systemctl restart docker
```

### é—®é¢˜3ï¼šæƒé™é”™è¯¯ (Linux)

```bash
# é”™è¯¯ï¼špermission denied while trying to connect to the Docker daemon socket

# è§£å†³æ–¹æ¡ˆï¼šå°†ç”¨æˆ·æ·»åŠ åˆ°dockerç»„
sudo usermod -aG docker $USER
newgrp docker

# é‡æ–°ç™»å½•æˆ–è¿è¡Œ
su - $USER
```

## 1.9 æœ¬ç« æ€»ç»“

### æ ¸å¿ƒçŸ¥è¯†ç‚¹

âœ… **Dockeræ˜¯ä»€ä¹ˆ**
- å®¹å™¨åŒ–å¹³å°
- è§£å†³"åœ¨æˆ‘ç”µè„‘ä¸Šèƒ½è¿è¡Œ"çš„é—®é¢˜
- å®ç°åº”ç”¨çš„å¿«é€Ÿéƒ¨ç½²å’Œç§»æ¤

âœ… **å®¹å™¨ vs è™šæ‹Ÿæœº**
- å®¹å™¨æ›´è½»é‡ã€å¯åŠ¨æ›´å¿«
- å…±äº«å®¿ä¸»OSå†…æ ¸
- é€‚åˆå¾®æœåŠ¡æ¶æ„

âœ… **ä¸‰å¤§æ ¸å¿ƒç»„ä»¶**
- é•œåƒï¼ˆImageï¼‰ï¼šåªè¯»æ¨¡æ¿
- å®¹å™¨ï¼ˆContainerï¼‰ï¼šè¿è¡Œå®ä¾‹
- ä»“åº“ï¼ˆRepositoryï¼‰ï¼šé•œåƒå­˜å‚¨

âœ… **Dockeræ¶æ„**
- Client-Serveræ¶æ„
- Docker Clientå‘é€å‘½ä»¤
- Docker Daemonæ‰§è¡Œæ“ä½œ

âœ… **å®‰è£…å’ŒéªŒè¯**
- ä¸åŒç³»ç»Ÿçš„å®‰è£…æ–¹æ³•
- ä½¿ç”¨hello-worldéªŒè¯
- åŸºæœ¬å‘½ä»¤çš„ä½¿ç”¨

### ä¸‹ä¸€æ­¥å­¦ä¹ 

åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥å­¦ä¹ ï¼š
- Dockeré•œåƒçš„åˆ†å±‚åŸç†
- å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸ
- æ›´å¤šçš„Dockerå‘½ä»¤å’Œæ“ä½œ
- å®é™…çš„åº”ç”¨éƒ¨ç½²æ¡ˆä¾‹

### ä½œä¸š

1. âœï¸ åœ¨è‡ªå·±çš„ç”µè„‘ä¸ŠæˆåŠŸå®‰è£…Docker
2. âœï¸ è¿è¡Œhello-worldå®¹å™¨
3. âœï¸ è¿è¡ŒNginxå®¹å™¨å¹¶è®¿é—®
4. âœï¸ å°è¯•è¿è¡ŒUbuntuã€Redisã€MySQLç­‰é•œåƒ
5. âœï¸ ç†Ÿæ‚‰åŸºæœ¬çš„Dockerå‘½ä»¤

## 1.10 å»¶ä¼¸é˜…è¯»

- [Dockerå®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)
- [Docker Hub](https://hub.docker.com/)
- [Dockeræœ€ä½³å®è·µ](https://docs.docker.com/develop/dev-best-practices/)

---

**æ­å–œä½ å®Œæˆç¬¬1ç« çš„å­¦ä¹ ï¼ğŸ‰**

å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬è¿›å…¥[ç¬¬2ç« ï¼šDockeråŸºç¡€æ¦‚å¿µ](../chapter02-basic-concepts/README.md)
