# Helmä»£ç ç¤ºä¾‹ç›®å½•

## ğŸ“ ä»£ç ç»“æ„è¯´æ˜

æœ¬ç›®å½•åŒ…å«Helmä»å…¥é—¨åˆ°ä¸“å®¶çš„å®Œæ•´å®è·µä»£ç ç¤ºä¾‹ï¼Œæ¯ä¸ªå­ç›®å½•å¯¹åº”ä¸åŒå­¦ä¹ é˜¶æ®µçš„å®é™…é¡¹ç›®ã€‚

### ç›®å½•ç»“æ„

```
code/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ basic-chart/                 # åŸºç¡€Chartç¤ºä¾‹ - ç¬¬1-2ç« 
â”‚   â”œâ”€â”€ Chart.yaml              # Chartå…ƒæ•°æ®
â”‚   â”œâ”€â”€ values.yaml              # é»˜è®¤é…ç½®å€¼
â”‚   â”œâ”€â”€ templates/               # æ¨¡æ¿æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ deployment.yaml     # éƒ¨ç½²æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ service.yaml        # æœåŠ¡æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ ingress.yaml        # å…¥å£æ¨¡æ¿ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â””â”€â”€ _helpers.tpl        # æ¨¡æ¿åŠ©æ‰‹å‡½æ•°
â”‚   â””â”€â”€ README.md               # ç¤ºä¾‹è¯´æ˜
â”œâ”€â”€ advanced-chart/              # é«˜çº§Chartç¤ºä¾‹ - ç¬¬3ç« 
â”‚   â”œâ”€â”€ Chart.yaml
â”‚   â”œâ”€â”€ values.yaml
â”‚   â”œâ”€â”€ values.schema.json       # é…ç½®éªŒè¯æ¨¡å¼
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ _helpers.tpl        # å¤æ‚æ¨¡æ¿åŠ©æ‰‹
â”‚   â”‚   â”œâ”€â”€ deployment.yaml     # é«˜çº§éƒ¨ç½²æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ hpa.yaml            # è‡ªåŠ¨æ‰©ç¼©å®¹
â”‚   â”‚   â””â”€â”€ configmap.yaml      # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ multi-service/              # å¤šæœåŠ¡Chart - ç¬¬4ç« 
â”‚   â”œâ”€â”€ Chart.yaml
â”‚   â”œâ”€â”€ values.yaml
â”‚   â”œâ”€â”€ charts/                  # å­Chartä¾èµ–
â”‚   â”‚   â”œâ”€â”€ frontend/
â”‚   â”‚   â”œâ”€â”€ backend/
â”‚   â”‚   â””â”€â”€ database/
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ frontend.yaml
â”‚   â”‚   â”œâ”€â”€ backend.yaml
â”‚   â”‚   â””â”€â”€ database.yaml
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ helmfile/                    # Helmfileé…ç½® - ç¬¬5ç« 
â”‚   â”œâ”€â”€ helmfile.yaml           # ä¸»é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ environments/           # ç¯å¢ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ dev.yaml
â”‚   â”‚   â”œâ”€â”€ staging.yaml
â”‚   â”‚   â””â”€â”€ production.yaml
â”‚   â”œâ”€â”€ releases/               # å‘å¸ƒå®šä¹‰
â”‚   â”‚   â”œâ”€â”€ app.yaml
â”‚   â”‚   â”œâ”€â”€ monitoring.yaml
â”‚   â”‚   â””â”€â”€ database.yaml
â”‚   â””â”€â”€ README.md
â””â”€â”€ enterprise/                  # ä¼ä¸šçº§ç¤ºä¾‹ - ç¬¬5ç« 
    â”œâ”€â”€ private-repo-setup/     # ç§æœ‰ä»“åº“æ­å»º
    â”œâ”€â”€ ci-cd-pipelines/        # CI/CDæµæ°´çº¿
    â”œâ”€â”€ monitoring-alerts/      # ç›‘æ§å‘Šè­¦
    â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Kubernetesé›†ç¾¤ï¼ˆMinikubeã€Kindæˆ–äº‘å¹³å°ï¼‰
- Helm 3.8+ ç‰ˆæœ¬
- kubectlå‘½ä»¤è¡Œå·¥å…·

### åŸºç¡€ç¤ºä¾‹è¿è¡Œ

```bash
# 1. è¿›å…¥åŸºç¡€Chartç›®å½•
cd basic-chart

# 2. éªŒè¯Chartè¯­æ³•
helm lint

# 3. æ¸²æŸ“æ¨¡æ¿é¢„è§ˆ
helm template my-release .

# 4. éƒ¨ç½²åˆ°é›†ç¾¤
helm install my-release .

# 5. æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
helm list
kubectl get pods

# 6. æµ‹è¯•åº”ç”¨
kubectl port-forward svc/my-release 8080:80
# æµè§ˆå™¨è®¿é—® http://localhost:8080

# 7. æ¸…ç†éƒ¨ç½²
helm uninstall my-release
```

## ğŸ“– ç¤ºä¾‹è¯´æ˜

### 1. basic-chart/ - åŸºç¡€Chartç¤ºä¾‹
**å¯¹åº”ç« èŠ‚**ï¼šç¬¬1-2ç«   
**å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡ChartåŸºæœ¬ç»“æ„å’Œæ¨¡æ¿è¯­æ³•

**åŒ…å«å†…å®¹**ï¼š
- ç®€å•çš„Webåº”ç”¨éƒ¨ç½²
- åŸºç¡€æ¨¡æ¿è¯­æ³•ç¤ºä¾‹
- Valuesé…ç½®ç®¡ç†
- æœåŠ¡æš´éœ²é…ç½®

**å®éªŒæ­¥éª¤**ï¼š
```bash
cd basic-chart
# 1. ä¿®æ”¹values.yamlé…ç½®
# 2. è¿è¡Œhelm lintæ£€æŸ¥è¯­æ³•
# 3. ä½¿ç”¨helm templateé¢„è§ˆ
# 4. éƒ¨ç½²å¹¶æµ‹è¯•åº”ç”¨
```

### 2. advanced-chart/ - é«˜çº§Chartç¤ºä¾‹
**å¯¹åº”ç« èŠ‚**ï¼šç¬¬3ç«   
**å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡é«˜çº§æ¨¡æ¿ç‰¹æ€§å’Œé…ç½®éªŒè¯

**åŒ…å«å†…å®¹**ï¼š
- å‘½åæ¨¡æ¿å’Œæ¨¡æ¿ç»§æ‰¿
- Sprigå‡½æ•°åº“ä½¿ç”¨
- é…ç½®éªŒè¯ï¼ˆJSON Schemaï¼‰
- æ¡ä»¶èµ„æºç”Ÿæˆ

**å®éªŒæ­¥éª¤**ï¼š
```bash
cd advanced-chart
# 1. ç ”ç©¶_helpers.tplä¸­çš„å‘½åæ¨¡æ¿
# 2. æµ‹è¯•values.schema.jsonéªŒè¯
# 3. ä½¿ç”¨å¤æ‚æ¨¡æ¿å‡½æ•°
# 4. éƒ¨ç½²å¤šç¯å¢ƒé…ç½®
```

### 3. multi-service/ - å¤šæœåŠ¡Chart
**å¯¹åº”ç« èŠ‚**ï¼šç¬¬4ç«   
**å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡å¤æ‚åº”ç”¨éƒ¨ç½²ç­–ç•¥

**åŒ…å«å†…å®¹**ï¼š
- å¤šæœåŠ¡æ¶æ„éƒ¨ç½²
- æœåŠ¡ä¾èµ–ç®¡ç†
- éƒ¨ç½²ç­–ç•¥ï¼ˆè“ç»¿ã€é‡‘ä¸é›€ï¼‰
- ç”Ÿå‘½å‘¨æœŸé’©å­

**å®éªŒæ­¥éª¤**ï¼š
```bash
cd multi-service
# 1. ç ”ç©¶ä¾èµ–å…³ç³»é…ç½®
# 2. æµ‹è¯•ä¸åŒéƒ¨ç½²ç­–ç•¥
# 3. é…ç½®ç”Ÿå‘½å‘¨æœŸé’©å­
# 4. å®æ–½å›æ»šæµ‹è¯•
```

### 4. helmfile/ - Helmfileé…ç½®
**å¯¹åº”ç« èŠ‚**ï¼šç¬¬5ç«   
**å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡å£°æ˜å¼éƒ¨ç½²ç®¡ç†

**åŒ…å«å†…å®¹**ï¼š
- HelmfileåŸºç¡€é…ç½®
- å¤šç¯å¢ƒç®¡ç†
- å‘å¸ƒç‰ˆæœ¬æ§åˆ¶
- GitOpså·¥ä½œæµ

**å®éªŒæ­¥éª¤**ï¼š
```bash
cd helmfile
# 1. é…ç½®ä¸åŒç¯å¢ƒvalues
# 2. ä½¿ç”¨helmfile syncéƒ¨ç½²
# 3. æµ‹è¯•ç¯å¢ƒéš”ç¦»
# 4. å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²
```

### 5. enterprise/ - ä¼ä¸šçº§ç¤ºä¾‹
**å¯¹åº”ç« èŠ‚**ï¼šç¬¬5ç«   
**å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡ä¼ä¸šçº§æœ€ä½³å®è·µ

**åŒ…å«å†…å®¹**ï¼š
- ç§æœ‰Chartä»“åº“æ­å»º
- CI/CDæµæ°´çº¿é…ç½®
- ç›‘æ§å‘Šè­¦ä½“ç³»
- å®‰å…¨åˆè§„é…ç½®

**å®éªŒæ­¥éª¤**ï¼š
```bash
cd enterprise
# 1. æ­å»ºç§æœ‰Chartä»“åº“
# 2. é…ç½®CI/CDæµæ°´çº¿
# 3. éƒ¨ç½²ç›‘æ§ä½“ç³»
# 4. å®æ–½å®‰å…¨æ‰«æ
```

## ğŸ§ª å®éªŒç¯å¢ƒå‡†å¤‡

### ä½¿ç”¨Minikubeï¼ˆæ¨èï¼‰
```bash
# å®‰è£…Minikube
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-latest-amd64.msi
# æˆ–ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…

# å¯åŠ¨é›†ç¾¤
minikube start --driver=docker

# éªŒè¯é›†ç¾¤
kubectl get nodes
```

### ä½¿ç”¨Kind
```bash
# å®‰è£…Kind
curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.17.0/kind-linux-amd64
chmod +x ./kind
sudo mv ./kind /usr/local/bin/kind

# åˆ›å»ºé›†ç¾¤
kind create cluster --name helm-learning
```

### äº‘å¹³å°ç¯å¢ƒ
```bash
# é…ç½®kubeconfigï¼ˆä»¥AKSä¸ºä¾‹ï¼‰
az aks get-credentials --resource-group myResourceGroup --name myAKSCluster

# éªŒè¯è¿æ¥
kubectl get nodes
```

## ğŸ”§ å·¥å…·é…ç½®

### Helmæ’ä»¶æ¨è
```bash
# Helm Diffæ’ä»¶
helm plugin install https://github.com/databus23/helm-diff

# Helm Secretsæ’ä»¶
helm plugin install https://github.com/jkroepke/helm-secrets

# Helm Unittestæ’ä»¶
helm plugin install https://github.com/helm-unittest/helm-unittest
```

### å¼€å‘å·¥å…·é…ç½®
```bash
# VS Codeæ‰©å±•æ¨è
code --install-extension ms-kubernetes-tools.vscode-kubernetes-tools
code --install-extension Tim-Koehler.helm-intellisense
```

## ğŸ“ å­¦ä¹ å»ºè®®

### å¾ªåºæ¸è¿›å­¦ä¹ 
1. **å…ˆç†è®ºåå®è·µ**ï¼šé˜…è¯»å¯¹åº”ç« èŠ‚åå†è¿›è¡Œä»£ç å®éªŒ
2. **ä»ç®€å•åˆ°å¤æ‚**ï¼šæŒ‰ç›®å½•é¡ºåºé€ä¸ªå®Œæˆç¤ºä¾‹
3. **ç†è§£å†ä¿®æ”¹**ï¼šå…ˆç†è§£ç°æœ‰ä»£ç ï¼Œå†å°è¯•ä¿®æ”¹å’Œæ‰©å±•
4. **é—®é¢˜é©±åŠ¨**ï¼šé‡åˆ°é—®é¢˜æ—¶æŸ¥çœ‹å¯¹åº”ç« èŠ‚çš„è§£å†³æ–¹æ¡ˆ

### å®è·µæŠ€å·§
- **å¤šåšå®éªŒ**ï¼šæ¯ä¸ªç¤ºä¾‹éƒ½äº²æ‰‹æ“ä½œä¸€é
- **è®°å½•ç¬”è®°**ï¼šè®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- **æ‰©å±•æ€è€ƒ**ï¼šæ€è€ƒå¦‚ä½•å°†ç¤ºä¾‹åº”ç”¨åˆ°å®é™…é¡¹ç›®
- **ç¤¾åŒºäº¤æµ**ï¼šé‡åˆ°éš¾é¢˜æ—¶å¯»æ±‚ç¤¾åŒºå¸®åŠ©

### æ•…éšœæ’é™¤
```bash
# å¸¸è§é—®é¢˜è§£å†³
helm list --all-namespaces                    # æŸ¥çœ‹æ‰€æœ‰å‘å¸ƒ
kubectl get events --sort-by='.lastTimestamp' # æŸ¥çœ‹äº‹ä»¶
helm get manifest my-release                  # æŸ¥çœ‹ç”Ÿæˆèµ„æº
kubectl describe pod my-pod                  # æŸ¥çœ‹Podè¯¦æƒ…
```

## ğŸ¯ å­¦ä¹ ç›®æ ‡æ£€æŸ¥

å®Œæˆæ‰€æœ‰ç¤ºä¾‹åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

### åŸºç¡€èƒ½åŠ› âœ…
- [ ] åˆ›å»ºå®Œæ•´çš„Helm Chartç»“æ„
- [ ] ä½¿ç”¨æ¨¡æ¿è¯­æ³•ç”ŸæˆKubernetesèµ„æº
- [ ] ç®¡ç†å¤šç¯å¢ƒé…ç½®å’ŒValuesæ–‡ä»¶
- [ ] å¤„ç†Chartä¾èµ–å…³ç³»

### ä¸­çº§èƒ½åŠ› âœ…
- [ ] ä½¿ç”¨é«˜çº§æ¨¡æ¿ç‰¹æ€§å’Œå‡½æ•°
- [ ] å®æ–½å¤šç§éƒ¨ç½²ç­–ç•¥
- [ ] é…ç½®ç›‘æ§å’Œå‘Šè­¦ä½“ç³»
- [ ] ç®¡ç†åº”ç”¨ç”Ÿå‘½å‘¨æœŸ

### ä¸“å®¶èƒ½åŠ› âœ…
- [ ] è®¾è®¡ä¼ä¸šçº§éƒ¨ç½²æ¶æ„
- [ ] æ­å»ºCI/CDè‡ªåŠ¨åŒ–æµæ°´çº¿
- [ ] å®æ–½å®‰å…¨å®¡è®¡å’Œåˆè§„æ€§
- [ ] ä¼˜åŒ–æ€§èƒ½å’Œèµ„æºä½¿ç”¨

---

**ğŸ’¡ æç¤ºï¼šå¼€å§‹ä½ çš„Helmå®è·µä¹‹æ—…å§ï¼æ¯ä¸ªç¤ºä¾‹éƒ½æœ‰è¯¦ç»†çš„READMEè¯´æ˜ï¼ŒæŒ‰ç…§æ­¥éª¤æ“ä½œå³å¯ã€‚**

**è®°ä½ï¼šçœŸæ­£çš„æŠ€èƒ½æ¥è‡ªäºå®è·µï¼** ğŸš€