# ç¬¬11ç« ï¼šæ•°æ®åˆ†æä¸å¯è§†åŒ–

> **å­¦ä¹ æ—¶é•¿**: 8-10å°æ—¶  
> **éš¾åº¦**: â­â­â­â­  
> **å‰ç½®çŸ¥è¯†**: ç¬¬1-10ç« 

## æœ¬ç« ç›®æ ‡

å­¦å®Œæœ¬ç« å,ä½ å°†èƒ½å¤Ÿ:

- âœ… ä½¿ç”¨Matplotlibåˆ›å»ºå„ç§å›¾è¡¨
- âœ… æŒæ¡Seabornç»Ÿè®¡å¯è§†åŒ–
- âœ… åˆ›å»ºäº¤äº’å¼Plotlyå›¾è¡¨
- âœ… è¿›è¡Œæ¢ç´¢æ€§æ•°æ®åˆ†æ(EDA)
- âœ… æ•°æ®å¯è§†åŒ–æœ€ä½³å®è·µ

---

## 11.1 MatplotlibåŸºç¡€

### 11.1.1 å®‰è£…

```bash
pip install matplotlib
```

### 11.1.2 åŸºæœ¬ç»˜å›¾

```python
import matplotlib.pyplot as plt
import numpy as np

# æŠ˜çº¿å›¾
x = np.linspace(0, 10, 100)
y = np.sin(x)

plt.plot(x, y)
plt.xlabel('Xè½´')
plt.ylabel('Yè½´')
plt.title('æ­£å¼¦æ›²çº¿')
plt.grid(True)
plt.show()

# å¤šæ¡æ›²çº¿
y2 = np.cos(x)
plt.plot(x, y, label='sin(x)')
plt.plot(x, y2, label='cos(x)')
plt.legend()
plt.show()

# è‡ªå®šä¹‰æ ·å¼
plt.plot(x, y, color='red', linestyle='--', linewidth=2, marker='o')
plt.show()
```

### 11.1.3 å¤šç§å›¾è¡¨ç±»å‹

```python
import matplotlib.pyplot as plt
import numpy as np

# æ•£ç‚¹å›¾
x = np.random.rand(50)
y = np.random.rand(50)
colors = np.random.rand(50)
sizes = 1000 * np.random.rand(50)

plt.scatter(x, y, c=colors, s=sizes, alpha=0.5)
plt.colorbar()
plt.title('æ•£ç‚¹å›¾')
plt.show()

# æŸ±çŠ¶å›¾
categories = ['A', 'B', 'C', 'D']
values = [23, 45, 56, 78]

plt.bar(categories, values)
plt.title('æŸ±çŠ¶å›¾')
plt.show()

# æ°´å¹³æŸ±çŠ¶å›¾
plt.barh(categories, values)
plt.title('æ°´å¹³æŸ±çŠ¶å›¾')
plt.show()

# é¥¼å›¾
labels = ['Python', 'Java', 'C++', 'JavaScript']
sizes = [35, 25, 20, 20]
explode = (0.1, 0, 0, 0)  # çªå‡ºç¬¬ä¸€å—

plt.pie(sizes, explode=explode, labels=labels, autopct='%1.1f%%', shadow=True)
plt.title('ç¼–ç¨‹è¯­è¨€ä½¿ç”¨å æ¯”')
plt.show()

# ç›´æ–¹å›¾
data = np.random.randn(1000)
plt.hist(data, bins=30, alpha=0.7, color='blue')
plt.xlabel('å€¼')
plt.ylabel('é¢‘ç‡')
plt.title('ç›´æ–¹å›¾')
plt.show()

# ç®±çº¿å›¾
data = [np.random.normal(0, std, 100) for std in range(1, 4)]
plt.boxplot(data, labels=['A', 'B', 'C'])
plt.title('ç®±çº¿å›¾')
plt.show()
```

### 11.1.4 å­å›¾

```python
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0, 10, 100)

# 2x2å­å›¾
fig, axs = plt.subplots(2, 2, figsize=(10, 8))

axs[0, 0].plot(x, np.sin(x))
axs[0, 0].set_title('sin(x)')

axs[0, 1].plot(x, np.cos(x), 'r')
axs[0, 1].set_title('cos(x)')

axs[1, 0].plot(x, np.tan(x))
axs[1, 0].set_title('tan(x)')

axs[1, 1].plot(x, np.exp(x))
axs[1, 1].set_title('exp(x)')

plt.tight_layout()
plt.show()
```

---

## 11.2 Seabornå¯è§†åŒ–

### 11.2.1 å®‰è£…

```bash
pip install seaborn
```

### 11.2.2 åŸºæœ¬ç”¨æ³•

```python
import seaborn as sns
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np

# è®¾ç½®æ ·å¼
sns.set_style('darkgrid')

# åŠ è½½ç¤ºä¾‹æ•°æ®é›†
tips = sns.load_dataset('tips')

# æ•£ç‚¹å›¾
sns.scatterplot(data=tips, x='total_bill', y='tip', hue='time')
plt.title('è´¦å•ä¸å°è´¹å…³ç³»')
plt.show()

# æŠ˜çº¿å›¾
sns.lineplot(data=tips, x='size', y='total_bill', hue='time')
plt.show()

# æŸ±çŠ¶å›¾
sns.barplot(data=tips, x='day', y='total_bill', hue='sex')
plt.show()

# ç®±çº¿å›¾
sns.boxplot(data=tips, x='day', y='total_bill')
plt.show()

# å°æç´å›¾
sns.violinplot(data=tips, x='day', y='total_bill', hue='sex')
plt.show()
```

### 11.2.3 ç»Ÿè®¡å›¾è¡¨

```python
import seaborn as sns
import matplotlib.pyplot as plt

tips = sns.load_dataset('tips')

# å›å½’å›¾
sns.regplot(data=tips, x='total_bill', y='tip')
plt.title('çº¿æ€§å›å½’')
plt.show()

# çƒ­åŠ›å›¾
flights = sns.load_dataset('flights')
flights_pivot = flights.pivot('month', 'year', 'passengers')

sns.heatmap(flights_pivot, annot=True, fmt='d', cmap='YlOrRd')
plt.title('èˆªç­ä¹˜å®¢æ•°çƒ­åŠ›å›¾')
plt.show()

# ç›¸å…³æ€§çŸ©é˜µ
iris = sns.load_dataset('iris')
corr = iris.corr()

sns.heatmap(corr, annot=True, cmap='coolwarm')
plt.title('ç›¸å…³æ€§çŸ©é˜µ')
plt.show()

# åˆ†å¸ƒå›¾
sns.histplot(data=tips, x='total_bill', kde=True)
plt.title('è´¦å•é‡‘é¢åˆ†å¸ƒ')
plt.show()

# é…å¯¹å›¾
sns.pairplot(iris, hue='species')
plt.show()
```

---

## 11.3 Plotlyäº¤äº’å¼å¯è§†åŒ–

### 11.3.1 å®‰è£…

```bash
pip install plotly
```

### 11.3.2 åŸºæœ¬å›¾è¡¨

```python
import plotly.graph_objects as go
import plotly.express as px
import numpy as np

# æŠ˜çº¿å›¾
x = np.linspace(0, 10, 100)
y = np.sin(x)

fig = go.Figure()
fig.add_trace(go.Scatter(x=x, y=y, mode='lines', name='sin(x)'))
fig.update_layout(title='äº¤äº’å¼æŠ˜çº¿å›¾', xaxis_title='X', yaxis_title='Y')
fig.show()

# æ•£ç‚¹å›¾
df = px.data.iris()
fig = px.scatter(df, x='sepal_width', y='sepal_length', color='species')
fig.show()

# æŸ±çŠ¶å›¾
fig = px.bar(df, x='species', y='sepal_length', color='species')
fig.show()

# 3Dæ•£ç‚¹å›¾
fig = px.scatter_3d(df, x='sepal_length', y='sepal_width', z='petal_length',
                     color='species')
fig.show()
```

### 11.3.3 é«˜çº§å›¾è¡¨

```python
import plotly.express as px
import plotly.graph_objects as go

# åœ°å›¾
df = px.data.gapminder()
fig = px.scatter_geo(df, locations="iso_alpha", color="continent",
                     hover_name="country", size="pop",
                     animation_frame="year",
                     projection="natural earth")
fig.show()

# æ¡‘åŸºå›¾
fig = go.Figure(data=[go.Sankey(
    node=dict(
        pad=15,
        thickness=20,
        label=["A", "B", "C", "D"],
        color="blue"
    ),
    link=dict(
        source=[0, 1, 0, 2],
        target=[2, 3, 3, 3],
        value=[8, 4, 2, 8]
    ))])

fig.update_layout(title_text="æ¡‘åŸºå›¾")
fig.show()

# é›·è¾¾å›¾
categories = ['æ•°å­¦', 'è¯­æ–‡', 'è‹±è¯­', 'ç‰©ç†', 'åŒ–å­¦']

fig = go.Figure()

fig.add_trace(go.Scatterpolar(
    r=[95, 85, 90, 88, 92],
    theta=categories,
    fill='toself',
    name='å­¦ç”ŸA'
))

fig.add_trace(go.Scatterpolar(
    r=[88, 92, 85, 95, 87],
    theta=categories,
    fill='toself',
    name='å­¦ç”ŸB'
))

fig.update_layout(
    polar=dict(
        radialaxis=dict(
            visible=True,
            range=[0, 100]
        )),
    title="å­¦ç”Ÿæˆç»©é›·è¾¾å›¾"
)

fig.show()
```

---

## 11.4 æ¢ç´¢æ€§æ•°æ®åˆ†æ(EDA)

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# åŠ è½½æ•°æ®
df = pd.read_csv('data.csv')

# 1. æ•°æ®æ¦‚è§ˆ
print("=" * 50)
print("æ•°æ®å½¢çŠ¶:", df.shape)
print("\nå‰5è¡Œ:")
print(df.head())

print("\næ•°æ®ä¿¡æ¯:")
print(df.info())

print("\nç»Ÿè®¡æè¿°:")
print(df.describe())

# 2. ç¼ºå¤±å€¼åˆ†æ
print("\nç¼ºå¤±å€¼ç»Ÿè®¡:")
print(df.isnull().sum())

# å¯è§†åŒ–ç¼ºå¤±å€¼
plt.figure(figsize=(10, 6))
sns.heatmap(df.isnull(), cbar=False, cmap='viridis')
plt.title('ç¼ºå¤±å€¼åˆ†å¸ƒ')
plt.show()

# 3. æ•°å€¼åˆ—åˆ†å¸ƒ
numeric_cols = df.select_dtypes(include=[np.number]).columns

for col in numeric_cols:
    plt.figure(figsize=(12, 4))
    
    plt.subplot(1, 3, 1)
    plt.hist(df[col].dropna(), bins=30)
    plt.title(f'{col} - ç›´æ–¹å›¾')
    
    plt.subplot(1, 3, 2)
    plt.boxplot(df[col].dropna())
    plt.title(f'{col} - ç®±çº¿å›¾')
    
    plt.subplot(1, 3, 3)
    df[col].dropna().plot(kind='density')
    plt.title(f'{col} - å¯†åº¦å›¾')
    
    plt.tight_layout()
    plt.show()

# 4. ç›¸å…³æ€§åˆ†æ
corr = df.corr()

plt.figure(figsize=(10, 8))
sns.heatmap(corr, annot=True, cmap='coolwarm', center=0)
plt.title('ç›¸å…³æ€§çƒ­åŠ›å›¾')
plt.show()

# 5. ç±»åˆ«å˜é‡åˆ†æ
cat_cols = df.select_dtypes(include=['object']).columns

for col in cat_cols:
    plt.figure(figsize=(10, 5))
    
    value_counts = df[col].value_counts()
    
    plt.subplot(1, 2, 1)
    value_counts.plot(kind='bar')
    plt.title(f'{col} - è®¡æ•°')
    plt.xticks(rotation=45)
    
    plt.subplot(1, 2, 2)
    value_counts.plot(kind='pie', autopct='%1.1f%%')
    plt.title(f'{col} - å æ¯”')
    
    plt.tight_layout()
    plt.show()

# 6. å¼‚å¸¸å€¼æ£€æµ‹
for col in numeric_cols:
    Q1 = df[col].quantile(0.25)
    Q3 = df[col].quantile(0.75)
    IQR = Q3 - Q1
    
    outliers = df[(df[col] < Q1 - 1.5*IQR) | (df[col] > Q3 + 1.5*IQR)]
    
    print(f"\n{col} å¼‚å¸¸å€¼æ•°é‡: {len(outliers)}")
```

---

## 11.5 å®æˆ˜:é”€å”®æ•°æ®å¯è§†åŒ–

```python
"""
é”€å”®æ•°æ®å¯è§†åŒ–åˆ†æ
å®Œæ•´çš„æ•°æ®åˆ†ææµç¨‹
"""

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
np.random.seed(42)

dates = pd.date_range('2023-01-01', '2023-12-31', freq='D')
data = {
    'date': dates,
    'sales': np.random.randint(1000, 10000, len(dates)) + np.sin(np.arange(len(dates))/30)*2000,
    'region': np.random.choice(['åŒ—äº¬', 'ä¸Šæµ·', 'å¹¿å·', 'æ·±åœ³'], len(dates)),
    'product': np.random.choice(['äº§å“A', 'äº§å“B', 'äº§å“C'], len(dates)),
    'temperature': 20 + 10*np.sin(np.arange(len(dates))/60) + np.random.randn(len(dates))*3
}

df = pd.DataFrame(data)
df['month'] = df['date'].dt.month
df['weekday'] = df['date'].dt.dayofweek

print("=== æ•°æ®æ¦‚è§ˆ ===")
print(df.head())

# 1. é”€å”®è¶‹åŠ¿
plt.figure(figsize=(15, 5))
plt.plot(df['date'], df['sales'])
plt.title('2023å¹´é”€å”®è¶‹åŠ¿', fontsize=16)
plt.xlabel('æ—¥æœŸ')
plt.ylabel('é”€å”®é¢')
plt.grid(True, alpha=0.3)
plt.tight_layout()
plt.show()

# 2. æœˆåº¦é”€å”®å¯¹æ¯”
monthly_sales = df.groupby('month')['sales'].sum()

plt.figure(figsize=(12, 6))
plt.bar(monthly_sales.index, monthly_sales.values, color='skyblue')
plt.title('æœˆåº¦é”€å”®é¢', fontsize=16)
plt.xlabel('æœˆä»½')
plt.ylabel('é”€å”®é¢')
plt.xticks(range(1, 13))
plt.grid(True, alpha=0.3, axis='y')
plt.tight_layout()
plt.show()

# 3. åœ°åŒºé”€å”®å¯¹æ¯”
region_sales = df.groupby('region')['sales'].sum().sort_values(ascending=False)

plt.figure(figsize=(10, 6))
plt.pie(region_sales.values, labels=region_sales.index, autopct='%1.1f%%',
        startangle=90, colors=sns.color_palette('pastel'))
plt.title('å„åœ°åŒºé”€å”®å æ¯”', fontsize=16)
plt.show()

# 4. äº§å“é”€å”®çƒ­åŠ›å›¾
product_month = df.pivot_table(values='sales', index='product', 
                                columns='month', aggfunc='sum')

plt.figure(figsize=(12, 4))
sns.heatmap(product_month, annot=True, fmt='.0f', cmap='YlOrRd')
plt.title('äº§å“æœˆåº¦é”€å”®çƒ­åŠ›å›¾', fontsize=16)
plt.xlabel('æœˆä»½')
plt.ylabel('äº§å“')
plt.tight_layout()
plt.show()

# 5. æ˜ŸæœŸé”€å”®æ¨¡å¼
weekday_sales = df.groupby('weekday')['sales'].mean()

plt.figure(figsize=(10, 6))
plt.bar(range(7), weekday_sales.values, color='coral')
plt.title('æ˜ŸæœŸé”€å”®æ¨¡å¼', fontsize=16)
plt.xlabel('æ˜ŸæœŸ')
plt.ylabel('å¹³å‡é”€å”®é¢')
plt.xticks(range(7), ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'])
plt.grid(True, alpha=0.3, axis='y')
plt.tight_layout()
plt.show()

# 6. é”€å”®é¢ä¸æ°”æ¸©å…³ç³»
plt.figure(figsize=(10, 6))
plt.scatter(df['temperature'], df['sales'], alpha=0.5)
plt.title('é”€å”®é¢ä¸æ°”æ¸©å…³ç³»', fontsize=16)
plt.xlabel('æ°”æ¸©(Â°C)')
plt.ylabel('é”€å”®é¢')

# æ·»åŠ è¶‹åŠ¿çº¿
z = np.polyfit(df['temperature'], df['sales'], 1)
p = np.poly1d(z)
plt.plot(df['temperature'].sort_values(), p(df['temperature'].sort_values()),
         "r--", alpha=0.8, linewidth=2)

plt.grid(True, alpha=0.3)
plt.tight_layout()
plt.show()

# 7. ç»¼åˆä»ªè¡¨æ¿
fig, axs = plt.subplots(2, 3, figsize=(18, 10))

# é”€å”®è¶‹åŠ¿
axs[0, 0].plot(df['date'], df['sales'], linewidth=0.8)
axs[0, 0].set_title('é”€å”®è¶‹åŠ¿')
axs[0, 0].grid(True, alpha=0.3)

# æœˆåº¦é”€å”®
axs[0, 1].bar(monthly_sales.index, monthly_sales.values)
axs[0, 1].set_title('æœˆåº¦é”€å”®')
axs[0, 1].set_xlabel('æœˆä»½')

# åœ°åŒºå¯¹æ¯”
region_sales.plot(kind='barh', ax=axs[0, 2])
axs[0, 2].set_title('åœ°åŒºé”€å”®')

# äº§å“å¯¹æ¯”
product_sales = df.groupby('product')['sales'].sum()
product_sales.plot(kind='pie', ax=axs[1, 0], autopct='%1.1f%%')
axs[1, 0].set_title('äº§å“å æ¯”')

# æ˜ŸæœŸæ¨¡å¼
axs[1, 1].bar(range(7), weekday_sales.values)
axs[1, 1].set_title('æ˜ŸæœŸé”€å”®æ¨¡å¼')
axs[1, 1].set_xticks(range(7))
axs[1, 1].set_xticklabels(['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'])

# æ¸©åº¦å…³ç³»
axs[1, 2].scatter(df['temperature'], df['sales'], alpha=0.5)
axs[1, 2].set_title('æ°”æ¸©ä¸é”€å”®å…³ç³»')
axs[1, 2].set_xlabel('æ°”æ¸©(Â°C)')
axs[1, 2].set_ylabel('é”€å”®é¢')

plt.tight_layout()
plt.show()

print("\n=== å…³é”®æŒ‡æ ‡ ===")
print(f"æ€»é”€å”®é¢: {df['sales'].sum():,.0f}")
print(f"å¹³å‡æ—¥é”€å”®é¢: {df['sales'].mean():,.0f}")
print(f"æœ€é«˜æ—¥é”€å”®é¢: {df['sales'].max():,.0f}")
print(f"æœ€ä½æ—¥é”€å”®é¢: {df['sales'].min():,.0f}")
print(f"\næœ€ä½³é”€å”®åœ°åŒº: {region_sales.index[0]}")
print(f"æœ€ä½³é”€å”®äº§å“: {product_sales.idxmax()}")
```

---

## 11.6 è¯¾åç»ƒä¹ 

### ç»ƒä¹ 1: è‚¡ç¥¨æ•°æ®å¯è§†åŒ–

ä¸‹è½½è‚¡ç¥¨æ•°æ®,ç»˜åˆ¶:
- Kçº¿å›¾
- æˆäº¤é‡å›¾
- ç§»åŠ¨å¹³å‡çº¿

### ç»ƒä¹ 2: å¤©æ°”æ•°æ®åˆ†æ

åˆ†æä¸€å¹´çš„å¤©æ°”æ•°æ®:
- æ¸©åº¦å˜åŒ–è¶‹åŠ¿
- é™é›¨é‡åˆ†å¸ƒ
- å­£èŠ‚æ€§æ¨¡å¼

### ç»ƒä¹ 3: ç”µå½±è¯„åˆ†å¯è§†åŒ–

åˆ†æç”µå½±æ•°æ®:
- è¯„åˆ†åˆ†å¸ƒ
- ç±»å‹å¯¹æ¯”
- å¹´ä»½è¶‹åŠ¿

---

## 11.7 æœ¬ç« å°ç»“

### å¯è§†åŒ–åº“å¯¹æ¯”

| åº“ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|---|---|---|
| **Matplotlib** | åŸºç¡€å¼ºå¤§ | é™æ€å›¾è¡¨ã€ç§‘å­¦è®¡ç®— |
| **Seaborn** | ç»Ÿè®¡ç¾è§‚ | ç»Ÿè®¡åˆ†æã€æ¢ç´¢æ€§åˆ†æ |
| **Plotly** | äº¤äº’å¼ | ä»ªè¡¨æ¿ã€Webåº”ç”¨ |

### å¸¸ç”¨å›¾è¡¨

- **æŠ˜çº¿å›¾**: è¶‹åŠ¿åˆ†æ
- **æŸ±çŠ¶å›¾**: ç±»åˆ«å¯¹æ¯”
- **æ•£ç‚¹å›¾**: ç›¸å…³æ€§åˆ†æ
- **é¥¼å›¾**: å æ¯”å±•ç¤º
- **ç®±çº¿å›¾**: åˆ†å¸ƒåˆ†æ
- **çƒ­åŠ›å›¾**: çŸ©é˜µæ•°æ®

### ä¸‹ä¸€ç« é¢„å‘Š

**ç¬¬12ç«  - å®æˆ˜é¡¹ç›®**,å°†ç»¼åˆè¿ç”¨æ‰€å­¦çŸ¥è¯†å®Œæˆ:
- ğŸ® æ¸¸æˆå¼€å‘
- ğŸ¤– çˆ¬è™«é¡¹ç›®
- ğŸ“Š æ•°æ®åˆ†æç³»ç»Ÿ
- ğŸŒ Webåº”ç”¨

---

[â† ä¸Šä¸€ç« ](./10-Webå¼€å‘.md) | [è¿”å›ç›®å½•](./README.md) | [ä¸‹ä¸€ç« : å®æˆ˜é¡¹ç›® â†’](./12-å®æˆ˜é¡¹ç›®.md)
